import{r as j,W as T,j as e,q as O}from"./app-3mzWtfnt.js";import{D as G}from"./DashboardSchedule-3-jwTON7.js";import{d as Y}from"./dayjs.min-B3bvL0FH.js";import{w as L,a as N}from"./weekOfYear-DqWFZhPa.js";import{_ as q}from"./lodash-C-UiRv_R.js";import{B as o,F as p,T as u,a as F}from"./chunk-KRPLQIP4-Dz1C-LH0.js";import{G as y}from"./chunk-JARCRF6W-D88SptP6.js";import{G as g}from"./chunk-ZPFGWTBB-f5d9UIkk.js";import{C as P}from"./chunk-Q6Q7I7E5-BsSFYtl-.js";import{u as H}from"./chunk-7JBTTEVG-CejRbn_u.js";import{F as w,I as z}from"./chunk-6CVSDS6C-C4rspNSS.js";import{F as b}from"./chunk-VGESXGVT-Bp8ktNDL.js";import{S as R}from"./chunk-3RSXBRAN-uzdinh3A.js";import{M as J,a as K,b as Q,c as U}from"./chunk-4FCEGNGT-DpzLOA5m.js";import{M as V,a as X}from"./chunk-RAWN7VJ3-Dd7bd7NX.js";import{D as Z}from"./DoctorLayout-rLg0PifZ.js";import"./chunk-6RTX462E-DC5x0O_b.js";import"./range-PHbfMuXe.js";import"./defineProperty-DmAPQKcv.js";import"./iconBase-CsBEadFK.js";import"./Logo-lwkzWSUZ.js";Y.extend(L);Y.extend(N);const x=Y(),W=[];let ee=8;for(let t=0;t<=45;t++){const i=t%3===0?e.jsx(g,{fontSize:"11px",rowSpan:1,children:`${ee++}:00`},t):e.jsx(g,{rowSpan:1},t);W.push(i)}const oe=t=>{let i=0;return t>10&&t<=20&&(i=1),t>20&&t<=40?i=2:t>40&&(i=3),i},B=(t,i)=>{t=t.split(":"),i=i.split(":");const s=new Date(0,0,0,t[0],t[1],0);let h=new Date(0,0,0,i[0],i[1],0).getTime()-s.getTime();const d=Math.floor(h/1e3/60/60);h-=d*1e3*60*60;const n=Math.floor(h/1e3/60);return d*3+oe(n)},k=(t,i,s,m="8:00")=>{let h=m;return t.map((d,n)=>{const l=[],r=B(h,d.start_time),a=B(d.start_time,d.end_time);d.start_time.split(":");const S=d.end_time.split(":");return h=d.end_time,r&&l.push(e.jsx(g,{rowSpan:r},`empty-${n}`)),l.push(e.jsx(g,{_hover:{backgroundColor:"#BEE3F8",cursor:"pointer"},borderRadius:"md",border:"1px solid #1366DE",bg:i===d.id?"blue.100":"white",onClick:()=>s(d.id),p:"4px 4px",overflow:"scroll",rowSpan:a,children:a<=2?e.jsxs(p,{justify:"space-between",children:[e.jsx(o,{color:"black",fontWeight:"bold",children:d.task}),e.jsx(o,{children:d.location.split(",")[0]})]}):e.jsxs(o,{h:"100%",p:"4px 4px",children:[e.jsx(o,{color:"black",fontWeight:"bold",fontSize:"13px",children:d.task}),e.jsx(o,{children:d.location})]})},n)),S[1]>=40&&(h=`${Number(S[0])+1}:00:00`,l.push(e.jsx(g,{rowSpan:1},`empty-${n}-ex`))),l})},I=(t,i)=>new Date(t).toLocaleDateString(i,{weekday:"long"});function te({idManager:t,asideData:i}){const[s,m]=j.useState({}),{get:h,processing:d}=T(),{changeId:n,id:l}=t,r=a=>{n(a),h(route("schedule.edit",a),{preserveState:!0})};return j.useEffect(()=>{i&&m(i)},[i]),e.jsxs(o,{border:"2px solid #F0F0F1",borderRadius:"xl",bg:"white",w:"100%",h:"100%",fontSize:"12px",pl:"4px",children:[e.jsxs(p,{align:"center",justify:"space-between",w:"100%",h:"5%",p:"16px",children:[e.jsx(o,{fontWeight:"bold",fontSize:"14px",children:"Your Schedule"}),e.jsx(o,{fontSize:"13px",children:x.format("MMMM DD, YYYY")})]}),e.jsxs(p,{borderRadius:"xl",w:"100%",h:"95%",pt:"8px",px:"4px",overflow:"scroll",children:[e.jsx(y,{templateRows:"repeat(45, 1fr)",w:"2%",height:"1225px",mt:"4.9vh",pr:"40px",children:W}),e.jsxs(o,{w:"98%",children:[e.jsxs(y,{templateColumns:"repeat(3, 1fr)",gap:0,w:"100%",h:"4%",textAlign:"center",children:[e.jsxs(g,{borderTopRadius:"md",w:"100%",bg:"#F2F7FF",textAlign:"center",color:"#1366DE",children:[e.jsx(o,{w:"100%",h:"50%",children:x.date()}),e.jsx(o,{w:"100%",h:"50%",children:I(x.toISOString())})]}),e.jsxs(g,{borderTopRadius:"md",w:"100%",children:[e.jsx(o,{w:"100%",h:"50%",children:x.add(1,"day").date()}),e.jsx(o,{w:"100%",h:"50%",children:I(x.add(1,"day").toISOString())})]}),e.jsxs(g,{borderTopRadius:"md",w:"100%",children:[e.jsx(o,{w:"100%",h:"50%",children:x.add(2,"day").date()}),e.jsx(o,{w:"100%",h:"50%",children:I(x.add(2,"day").toISOString())})]})]}),e.jsx(p,{w:"100%",h:"1225px",mt:"1.5vh",children:!d&&s?e.jsxs(e.Fragment,{children:[e.jsx(y,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:"#F2F7FF",w:"33.33%",h:"100%",pl:"1px",children:s[x.format("YYYY-MM-DD")]?k(s[x.format("YYYY-MM-DD")],l,r):""}),e.jsx(y,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",w:"33.33%",h:"100%",pl:"1px",children:s[x.add(1,"day").format("YYYY-MM-DD")]?k(s[x.add(1,"day").format("YYYY-MM-DD")],l,r):""}),e.jsx(y,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",w:"33.33%",h:"100%",pl:"1px",children:s[x.add(2,"day").format("YYYY-MM-DD")]?k(s[x.add(2,"day").format("YYYY-MM-DD")],l,r):""})]}):s?e.jsx(P,{mx:"auto",mt:"45vh",isIndeterminate:!0,color:"blue.300"}):""})]})]})]})}const re=Y();function se({modeManager:t,idManager:i,editData:s}){const{isOpen:m,onOpen:h,onClose:d}=H(),{data:n,setData:l,errors:r,setError:a,post:S,patch:v,delete:C,processing:_,reset:D}=T({task:"",office:"north office",floor:"floor 1",room:"room C206",date:"",time_start:"08:00",time_end:"09:00"}),{changeMode:M,mode:f}=t,{changeId:ie,id:E}=i;O().props,j.useEffect(()=>{q.isEmpty(s)||l({task:s[0].task,office:s[0].location.split(", ")[0],floor:s[0].location.split(", ")[1],room:s[0].location.split(", ")[2],date:s[0].date,time_start:s[0].start_time,time_end:s[0].end_time})},[s]);const A=c=>{if(c.preventDefault(),n.time_end<=n.time_start){a("end_time","End time is required to be after start time");return}if(n.date<re.format("YYYY-MM-DD")){a("date","Cannot add schedule to a past date");return}f==="add"?S(route("schedule.store"),{onSuccess:()=>D()}):v(route("schedule.update",{id:E}),{onSuccess:()=>{M("add"),D()}})},$=c=>{C(route("schedule.delete",{id:c}),{onSuccess:()=>{M("add"),D()}})};return e.jsxs(o,{border:"2px solid #F0F0F1",borderRadius:"xl",bg:"white",w:"100%",h:"100%",children:[e.jsxs("form",{onSubmit:A,style:{width:"100%",height:"100%",padding:"8px"},children:[e.jsxs(p,{w:"100%",h:"10%",p:"8px",align:"center",justify:"space-between",fontSize:"12px",children:[e.jsx(o,{fontWeight:"bold",children:"Manage your schedule"}),e.jsxs(p,{align:"center",justify:"space-between",bg:"white",border:"1px solid #F0F0F1",borderRadius:"xl",fontSize:"11px",w:"20%",children:[e.jsx(o,{w:"50%",h:"100%",p:"4px",borderLeftRadius:"xl",borderRight:"1px solid #F0F0F1",textAlign:"center",bg:f=="add"?"blue.200":"gray.100",color:f=="add"?"white":"black",style:f=="add"?{cursor:"default"}:{cursor:"pointer"},onClick:()=>{f!=="add"&&(M("add"),l({task:"",office:"north office",floor:"floor 1",room:"room C206",date:"",time_start:"08:00",time_end:"09:00"}))},_hover:f=="edit"?{backgroundColor:"#90CDF4",color:"white"}:"",children:"Add"}),e.jsx(o,{w:"50%",h:"100%",p:"4px",borderRightRadius:"xl",textAlign:"center",bg:f=="edit"?"blue.200":"gray.100",color:f=="edit"?"white":"gray.300",style:{cursor:"default"},children:"Edit"})]})]}),e.jsxs(p,{w:"100%",h:"75%",children:[e.jsxs(o,{w:"60%",h:"100%",p:"8px",fontSize:"5px",children:[e.jsx(u,{mb:"8px",fontSize:"13px",fontWeight:"bold",children:"Title: "}),e.jsxs(w,{ml:"10px",w:"87%",isInvalid:r.task,children:[e.jsx(z,{variant:"outline",size:"sm",fontSize:"12px",id:"task",name:"task",placeholder:"Title",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.task,onChange:c=>{l("task",c.target.value),a("task","")}}),e.jsx(b,{children:r.task})]}),e.jsx(u,{mt:"10px",mb:"8px",fontSize:"13px",fontWeight:"bold",children:"Location: "}),e.jsxs(o,{w:"100%",pl:"4px",fontSize:"12px",children:[e.jsxs(w,{isInvalid:r.office,w:"90%",children:[e.jsxs(p,{w:"100%",align:"center",p:"4px",children:[e.jsx(u,{w:"21%",mr:"5px",fontSize:"12px",children:"Office: "}),e.jsxs(R,{w:"77%",variant:"outline",size:"sm",fontSize:"12px",id:"office",name:"office",placeholder:"Office",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.office,onChange:c=>{l("office",c.target.value),a("office","")},children:[e.jsx("option",{value:"north office",children:"North Office"}),e.jsx("option",{value:"south office",children:"South Office"}),e.jsx("option",{value:"east office",children:"East Office"}),e.jsx("option",{value:"west office",children:"West Office"})]})]}),e.jsx(b,{ml:"24%",children:r.office})]}),e.jsxs(w,{isInvalid:r.floor,w:"90%",p:"4px",children:[e.jsxs(p,{w:"100%",align:"center",p:"4px",children:[e.jsx(u,{w:"20%",mr:"10px",fontSize:"12px",children:"Floor: "}),e.jsxs(R,{w:"80%",variant:"outline",size:"sm",fontSize:"12px",id:"floor",name:"floor",placeholder:"Floor",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.floor,onChange:c=>{l("floor",c.target.value),a("floor","")},children:[e.jsx("option",{value:"floor 1",children:"Floor 1"}),e.jsx("option",{value:"floor 2",children:"Floor 2"})]})]}),e.jsx(b,{ml:"24%",children:r.floor})]}),e.jsxs(w,{isInvalid:r.room,w:"90%",p:"4px",children:[e.jsxs(p,{w:"100%",align:"center",p:"4px",children:[e.jsx(u,{w:"20%",mr:"10px",fontSize:"12px",children:"Room: "}),e.jsxs(R,{w:"80%",variant:"outline",size:"sm",fontSize:"12px",id:"room",name:"room",placeholder:"Room",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.room,onChange:c=>{l("room",c.target.value),a("room","")},children:[e.jsx("option",{value:"room C206",children:"Room C206"}),e.jsx("option",{value:"room C207",children:"Room C207"})]})]}),e.jsx(b,{ml:"24%",children:r.room})]})]})]}),e.jsxs(o,{w:"40%",h:"100%",p:"8px",children:[e.jsx(u,{mb:"8px",fontSize:"13px",fontWeight:"bold",children:"Date: "}),e.jsxs(w,{ml:"10px",w:"85%",isInvalid:r.date,children:[e.jsx(z,{type:"date",variant:"outline",size:"sm",fontSize:"12px",id:"date",name:"date",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.date,onChange:c=>{l("date",c.target.value),a("date","")}}),e.jsx(b,{children:r.date})]}),e.jsx(u,{mt:"10px",mb:"8px",fontSize:"13px",fontWeight:"bold",children:"Time: "}),e.jsxs(o,{w:"100%",px:"8px",children:[e.jsxs(p,{w:"100%",align:"flex-start",children:[e.jsx(u,{w:"20%",mt:"8px",fontSize:"12px",children:"From: "}),e.jsxs(w,{ml:"10px",w:"67%",isInvalid:r.time_start,children:[e.jsx(z,{type:"time",variant:"outline",size:"sm",fontSize:"12px",id:"time_start",name:"time_start",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.time_start,onChange:c=>{l("time_start",c.target.value),a("time_start","")}}),e.jsx(b,{children:r.time_start})]})]}),e.jsxs(p,{mt:"8px",w:"100%",align:"flex-start",children:[e.jsx(u,{w:"20%",mt:"8px",fontSize:"12px",children:"To: "}),e.jsxs(w,{ml:"10px",w:"67%",isInvalid:r.time_end,children:[e.jsx(z,{type:"time",variant:"outline",size:"sm",fontSize:"12px",id:"time_end",name:"time_end",borderRadius:"md",focusBorderColor:"blue.500",borderColor:"gray.400",value:n.time_end,onChange:c=>{l("time_end",c.target.value),a("time_end","")}}),e.jsx(b,{children:r.time_end})]})]})]})]})]}),e.jsx(p,{w:"100%",h:"15%",p:"8px",align:"center",justify:"flex-end",children:e.jsxs(o,{children:[e.jsx(F,{type:"submit",size:"sm",bg:"blue.300",_hover:{opacity:"0.7"},color:"white",mr:"2px",children:"Save"}),f==="edit"?e.jsx(F,{onClick:h,size:"sm",bg:"red.300",color:"white",children:"Delete"}):""]})})]}),e.jsxs(J,{isOpen:m,onClose:d,isCentered:!0,children:[e.jsx(K,{}),e.jsxs(V,{children:[e.jsx(Q,{}),e.jsx(U,{children:e.jsx(o,{children:"You sure you want to delete this item?"})}),e.jsxs(X,{children:[e.jsx(F,{colorScheme:"blue",mr:3,onClick:d,children:"Cancel"}),e.jsx(F,{colorScheme:"red",onClick:()=>{d(),M("add"),$(E)},children:"Delete"})]})]})]})]})}function ze({calendars:t,aside:i}){const{message:s,flash:m}=O().props;let h=t,d=i;const[n,l]=j.useState({}),[r,a]=j.useState("add"),S={changeMode:a,mode:r},[v,C]=j.useState(0),_={changeId:C,id:v};return j.useEffect(()=>{v!==0&&a("edit")},[v]),j.useEffect(()=>{r==="add"&&C(0)},[r]),j.useMemo(()=>{m.schedule&&m.schedule.edit&&l(m.schedule.edit)},[m]),e.jsxs(Z,{state:"schedule",children:[e.jsx(o,{w:"55%",h:"100%",children:e.jsxs(o,{w:"100%",h:"100%",p:"4px 8px",fontSize:"14px",children:[e.jsx(o,{w:"100%",h:"50%",pb:"8px",children:e.jsx(G,{width:"100%",height:"100%",schedule:h,navigation:!1})}),e.jsx(o,{w:"100%",h:"50%",children:e.jsx(se,{modeManager:S,idManager:_,editData:n})})]})}),e.jsx(o,{w:"32%",h:"100%",children:e.jsx(te,{idManager:_,asideData:d})})]})}export{ze as default};
