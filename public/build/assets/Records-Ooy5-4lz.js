import{q,r as h,W as L,j as e,e as y}from"./app-C1FUXzYO.js";import{d as v}from"./dayjs.min-BOU8cSsw.js";import{B as r,F as a,C as H}from"./chunk-KRPLQIP4-D5-S-d08.js";import{I as K}from"./chunk-6CVSDS6C-NeQbUJFN.js";import{H as U}from"./chunk-3ASUQ6PA-BWRxsk06.js";import{S as D}from"./chunk-ZHMYA64R-HyBbs1y0.js";import{_ as k}from"./lodash-tVGgKksc.js";import{t as X}from"./TestResultList-VIlLU8_y.js";import{S as O}from"./chunk-NEK3OOAM-OAh5-6t1.js";import{C as J}from"./chunk-Q6Q7I7E5-XbvczE4f.js";import{D as Q}from"./DoctorLayout-BaNiqfdK.js";import"./chunk-7JBTTEVG-1xPeE8DN.js";import"./chunk-4FCEGNGT-BVStUQ5B.js";import"./defineProperty-DmAPQKcv.js";import"./iconBase-DPmk0zYD.js";import"./chunk-5FG5SY5K-DCNg9cSu.js";import"./chunk-JARCRF6W-BrJdULZn.js";import"./Logo-B4iOwqDb.js";const G=v().second(0).millisecond(0),g={AGE:"age",NAME:"name"},Z=(t,i)=>v(t).hour(i.split(":")[0]).minute(i.split(":")[1]).second(0).millisecond(0),ee=(t,i)=>{const n={};let o=Number.MAX_SAFE_INTEGER;if(n.patientId=t.patient.id,n.name=t.patient.name,n.age=t.patient.age,t.appointments){const l=t.appointments.reduce((u,b)=>{const p=v(b.detail.date).second(0).millisecond(0),A=Math.abs(p.diff(G));return A<o&&b.doctor.id===i.id&&(o=A,u=b),u},{});n.date=l.detail.date;const d=`${l.detail.start_time.split(":")[0]}:${l.detail.start_time.split(":")[1]}`,E=`${l.detail.end_time.split(":")[0]}:${l.detail.end_time.split(":")[1]}`;n.startTime=d,n.endTime=E}return n},re=t=>e.jsxs(e.Fragment,{children:[e.jsx(r,{style:t.links[0].url?{color:"#1366DE",cursor:"pointer"}:{color:"gray",cursor:"not-allowed"},children:t.links[0].url?e.jsx(y,{href:t.first_page_url,children:"<<"}):"<<"}),e.jsx(r,{style:t.links[0].url?{color:"#1366DE",cursor:"pointer"}:{color:"gray",cursor:"not-allowed"},children:t.links[0].url?e.jsx(y,{href:t.links[0].url,children:"<"}):"<"}),t.links.filter(i=>i.url&&Number(i.label)).map(i=>e.jsx(y,{href:i.url,children:e.jsx(H,{style:i.active?{opacity:.4}:{cursor:"pointer"},_hover:i.active?{}:{backgroundColor:"blue.100",color:"white"},size:"27px",bg:i.active?"blue.100":"transparent",color:i.active?"gray":"#1366DE",children:e.jsx(r,{children:i.label})})},i.label)),e.jsx(r,{style:t.links[t.links.length-1].url?{color:"#1366DE",cursor:"pointer"}:{color:"gray",cursor:"not-allowed"},children:t.links[t.links.length-1].url?e.jsx(y,{href:t.links[t.links.length-1].url,children:">"}):">"}),e.jsx(r,{style:t.links[t.links.length-1].url?{color:"#1366DE",cursor:"pointer"}:{color:"gray",cursor:"not-allowed"},children:t.links[t.links.length-1].url?e.jsx(y,{href:t.last_page_url,children:">>"}):">"})]});function M({selectManager:t,medicalInfo:i,paginator:n}){const o=new URLSearchParams(window.location.search),{selected:l,setSelected:d}=t,{auth:E}=q().props;h.useState("");const[u,b]=h.useState(0),[p,A]=h.useState(o.get("age")?g.AGE:g.NAME),{get:f,data:S,setData:x,reset:C}=L({name:o.get("name")||"",age:o.get("age")||"",page:n.current_page}),N=Object.values(i),F=w=>{S[p]=w,f(route("doctor.records"))};return e.jsxs(r,{w:"100%",h:"100%",p:"16px",borderRadius:"xl",bg:"#F6F7FA",children:[e.jsx(r,{fontSize:"20px",fontWeight:"bold",borderBottom:"1px solid black",mb:"24px",children:"Patients List"}),e.jsxs(a,{w:"100%",mb:"16px",align:"center",children:[e.jsxs(a,{w:"20%",align:"center",borderRadius:"20px",border:"1px solid #ECEDED",mr:"4px",children:[e.jsx(r,{w:"50%",h:"100%",py:"10px",borderLeftRadius:"20px",_hover:p==g.AGE?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:p==g.NAME?"blue.100":"white",color:p==g.NAME?"#1366DE":"gray",fontWeight:p==g.NAME?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>{x({...S,name:"",age:""}),A(g.NAME),u&&(clearTimeout(u),b(0))},children:"Name"}),e.jsx(r,{w:"50%",h:"100%",py:"10px",borderRightRadius:"20px",_hover:p==g.NAME?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:p==g.AGE?"blue.100":"white",color:p==g.AGE?"#1366DE":"gray",fontWeight:p==g.AGE?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>{x({...S,name:"",age:""}),A(g.AGE),u&&(clearTimeout(u),b(0))},children:"Age"})]}),e.jsx(K,{placeholder:`Type a patient ${p}...`,value:S[p],onChange:w=>{x(p,w.target.value),u&&clearTimeout(u),b(setTimeout(()=>{F(w.target.value)},1e3))},size:"md",borderRadius:"xl",bg:"white"})]}),e.jsx(U,{justify:"center",mb:"16px",color:"#1366DE",spacing:5,children:re(n)}),e.jsx(r,{w:"100%",h:"90%",overflowY:"scroll",children:e.jsx(D,{spacing:3,children:N.length>0?N.map(w=>{const R=ee(w,E.doctor);if(R){const{patientId:s,name:c,age:B,date:W,startTime:_,endTime:Y}=R,V=Z(W,_);return e.jsxs(r,{w:"100%",p:"16px",borderRadius:"xl",border:"1px solid gray",_hover:{cursor:"pointer",backgroundColor:"#EAF1FA",color:"#1366DE"},bg:l===s?"#EAF1FA":"transparent",color:l===s?"#1366DE":"black",onClick:()=>d(s),fontSize:"14px",children:[e.jsx(r,{fontWeight:"bold",children:`${c}, ${B} years old`}),V.diff(G)<0?e.jsx(r,{fontSize:"12px",fontWeight:"bold",mt:"4px",children:"Last visit:"}):e.jsx(r,{fontSize:"12px",fontWeight:"bold",mt:"4px",children:"Next Visit:"}),e.jsxs(r,{fontSize:"12px",children:["Date: ",W]}),e.jsxs(r,{fontSize:"12px",children:["Time: ",`${_} - ${Y}`]})]},s)}else return e.jsx(e.Fragment,{})}):e.jsx(r,{fontWeight:"bold",ml:"8px",children:"No booked patients"})})})]})}const te=v().second(0).millisecond(0),z={Stable:"black",Fair:"#AF8CFA",Mild:"#FFC999",Severe:"#DE5031"},j={DATE:"date",DOCTOR:"doctor_name"},T={GENERAL:"general",PRESCRIPTION:"prescription"},m={APPOINTMENTS:"appointments",TESTS:"tests"};function oe(t){return!isNaN(Date.parse(t))}const P=t=>{const i=t.split("-");return`${i[2]}.${i[1]}.${i[0]}`},se=t=>t.filter(n=>{const o=n.detail.start_time.split(":"),l=v(n.detail.date).hour(Number(o[0])).minute(Number(o[1])).second(0).millisecond(0);return te.diff(l)>0}),$=(t,i="date")=>{const n={};return t.forEach(o=>{const l=o.detail;l.doctor_name=o.doctor.name,n[l[i]]?n[l[i]].push(l):n[l[i]]=[l]}),n};function ie({selectManager:t,medicalInfo:i,icd:n}){const[o,l]=h.useState({}),[d,E]=h.useState(T.GENERAL),[u,b]=h.useState({}),[p,A]=h.useState([]),[f,S]=h.useState(m.APPOINTMENTS),[x,C]=h.useState(j.DATE),{get:N}=L(),{selected:F}=t,w=Object.keys(u);h.useEffect(()=>{l(i[F])},[F]),h.useEffect(()=>{k.isEmpty(o)||(A(se(o.appointments)),b($(o.prescriptions,x)))},[o]),h.useMemo(()=>{k.isEmpty(o)||b($(o.prescriptions,x))},[x]);const R=s=>{N(route("appointment.note",{appointment:s}))};return k.isEmpty(o)?e.jsx(J,{mx:"auto",mt:"45vh",isIndeterminate:!0,color:"blue.300"}):e.jsxs(r,{w:"100%",h:"100%",p:"16px",borderRadius:"xl",bg:"#F6F7FA",children:[e.jsxs(r,{mb:"24px",children:[e.jsx(r,{fontSize:"36px",fontWeight:"bold",children:"Medical Record"}),e.jsxs(a,{align:"center",justify:"flex-start",textAlign:"center",fontSize:"14px",mt:"16px",children:[e.jsx(r,{p:"2px 6px",_hover:d!=T.GENERAL?{color:"#1366DE",cursor:"pointer"}:{},borderBottom:d==T.GENERAL?"1px solid #1366DE":"1px solid gray",color:d==T.GENERAL?"#1366DE":"gray",onClick:()=>{d!=T.GENERAL&&E(T.GENERAL)},children:"General"}),e.jsx(r,{p:"2px 6px",_hover:d!="prescription"?{color:"#1366DE",cursor:"pointer"}:{},borderBottom:d=="prescription"?"1px solid #1366DE":"1px solid gray",color:d=="prescription"?"#1366DE":"gray",onClick:()=>{d!="prescription"&&E("prescription")},children:"Prescriptions"})]})]}),d==T.GENERAL?e.jsx(r,{w:"100%",h:"82%",overflowY:"scroll",children:e.jsxs(D,{spacing:6,children:[e.jsxs(r,{w:"100%",children:[e.jsx(r,{fontWeight:"bold",ml:"6px",children:"Allergies"}),e.jsxs(O,{mt:"16px",columns:3,spacing:"16px",children:[e.jsxs(r,{h:"10vh",p:"12px",fontSize:"12px",bg:"white",border:"1px solid #EEEFF1",borderRadius:"xl",children:[e.jsx(r,{color:"gray.500",children:"Drug"}),e.jsx(D,{w:"100%",spacing:1,mt:"2px",overflowY:"scroll",children:o.allergies?o.allergies.Drug?o.allergies.Drug.map((s,c)=>e.jsxs(a,{w:"100%",justify:"space-between",align:"center",children:[e.jsx(r,{color:z[s.severity],fontWeight:"bold",children:s.severity}),e.jsx(r,{children:s.name})]},`drug-${c}`)):e.jsx(r,{fontWeight:"bold",children:"No known allergies"}):e.jsx(r,{fontWeight:"bold",children:"No known allergies"})})]}),e.jsxs(r,{h:"10vh",p:"12px",fontSize:"12px",bg:"white",border:"1px solid #EEEFF1",borderRadius:"xl",children:[e.jsx(r,{color:"gray.500",children:"Food"}),e.jsx(D,{w:"100%",spacing:1,mt:"2px",overflowY:"scroll",children:o.allergies?o.allergies.Food?o.allergies.Food.map((s,c)=>e.jsxs(a,{w:"100%",justify:"space-between",align:"center",children:[e.jsx(r,{color:z[s.severity],fontWeight:"bold",children:s.severity}),e.jsx(r,{children:s.name})]},`food-${c}`)):e.jsx(r,{fontWeight:"bold",children:"No known allergies"}):e.jsx(r,{fontWeight:"bold",children:"No known allergies"})})]}),e.jsxs(r,{h:"10vh",p:"12px",fontSize:"12px",bg:"white",border:"1px solid #EEEFF1",borderRadius:"xl",children:[e.jsx(r,{color:"gray.500",children:"Environmental"}),e.jsx(D,{w:"100%",spacing:1,mt:"2px",overflowY:"scroll",children:o.allergies?o.allergies.Environmental?o.allergies.Environmental.map((s,c)=>e.jsxs(a,{w:"100%",justify:"space-between",align:"center",children:[e.jsx(r,{color:z[s.severity],fontWeight:"bold",children:s.severity}),e.jsx(r,{children:s.name})]},`environment-${c}`)):e.jsx(r,{fontWeight:"bold",children:"No known allergies"}):e.jsx(r,{fontWeight:"bold",children:"No known allergies"})})]})]})]}),e.jsxs(r,{w:"100%",h:"28vh",children:[e.jsx(r,{fontWeight:"bold",ml:"6px",children:"Diagnoses"}),e.jsx(O,{mt:"16px",h:"87%",overflowY:"scroll",columns:2,spacing:"4px",children:o.diagnoses.length>0?o.diagnoses.map((s,c)=>e.jsxs(r,{h:"11vh",p:"12px",fontSize:"12px",bg:"white",border:"1px solid #EEEFF1",borderRadius:"xl",children:[e.jsxs(a,{align:"center",justify:"space-between",p:"2px 6px",mb:"4px",fontSize:"11px",children:[e.jsx(r,{bg:n[s.icd_code].color,p:"2px 6px",borderRadius:"md",color:"white",children:s.icd_code}),e.jsx(r,{fontSize:"13px",children:P(s.date)})]}),e.jsx(r,{p:"8px",fontWeight:"bold",children:n[s.icd_code].icd_name})]},c)):e.jsx(r,{pl:"8px",children:"No Available Diagnoses"})})]}),e.jsxs(r,{mt:"24px",w:"100%",children:[e.jsxs(a,{w:"99%",ml:"6px",mb:"8px",align:"center",justify:"space-between",children:[e.jsx(r,{fontWeight:"bold",fontSize:"14px",children:"Visits history"}),e.jsxs(a,{w:"20%",align:"center",borderRadius:"20px",border:"1px solid #ECEDED",children:[e.jsx(r,{w:"50%",h:"100%",p:"2px 4px",borderLeftRadius:"20px",_hover:f==m.TESTS?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:f==m.APPOINTMENTS?"blue.100":"white",color:f==m.APPOINTMENTS?"#1366DE":"gray",fontWeight:f==m.APPOINTMENTS?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>S(m.APPOINTMENTS),children:"Appointments"}),e.jsx(r,{w:"50%",h:"100%",p:"2px 4px",borderRightRadius:"20px",_hover:f==m.APPOINTMENTS?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:f==m.TESTS?"blue.100":"white",color:f==m.TESTS?"#1366DE":"gray",fontWeight:f==m.TESTS?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>S(m.TESTS),children:"Tests"})]})]}),f===m.APPOINTMENTS?p.length>0?e.jsxs(r,{w:"100%",h:"30vh",p:"4px",children:[e.jsxs(a,{align:"center",fontSize:"13px",color:"gray",children:[e.jsx(r,{w:"25%",p:"8px",children:"Date"}),e.jsx(r,{w:"25%",p:"8px",children:"Doctor"}),e.jsx(r,{w:"25%",p:"8px",children:"Specialty"}),e.jsx(r,{w:"15%",textAlign:"center",p:"8px",children:"Note"})]}),e.jsx(r,{w:"100%",h:"90%",overflowY:"scroll",children:e.jsx(D,{spacing:3,children:p.map((s,c)=>e.jsxs(a,{w:"100%",align:"center",fontSize:"12px",color:"black",fontWeight:"bold",children:[e.jsx(r,{w:"25%",p:"8px",borderBottom:"1px solid #D1D1D3",children:s.detail.date}),e.jsx(r,{w:"25%",p:"8px",borderBottom:"1px solid #D1D1D3",children:`Dr. ${s.doctor.name}`}),e.jsx(r,{w:"25%",p:"8px",borderBottom:"1px solid #D1D1D3",children:`${s.doctor.type.charAt(0).toUpperCase()}${s.doctor.type.slice(1)}`}),e.jsx(r,{w:"15%",p:"8px",borderBottom:"1px solid #D1D1D3",textAlign:"center",color:"#1366DE",_hover:{color:"blue",cursor:"pointer"},onClick:()=>R(s.detail.id),children:"Link"})]},`appointment-${c}`))})})]}):e.jsx(r,{children:"No past appointments"}):e.jsx(D,{w:"100%",h:"30vh",spacing:3,p:"4px",overflowY:"scroll",children:e.jsx(X,{data:o})})]})]})}):e.jsxs(D,{w:"100%",h:"82%",overflowY:"scroll",children:[e.jsx(r,{w:"100%",h:"20px",children:e.jsxs(a,{w:"100px",h:"100%",borderRadius:"20px",border:"1px solid #ECEDED",children:[e.jsx(r,{w:"50%",h:"100%",pt:"2px",borderLeftRadius:"20px",_hover:x==j.DOCTOR?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:x==j.DATE?"blue.100":"white",color:x==j.DATE?"#1366DE":"gray",fontWeight:x==j.DATE?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>C(j.DATE),children:"Date"}),e.jsx(r,{w:"50%",h:"100%",pt:"2px",borderRightRadius:"20px",_hover:x==j.DATE?{backgroundColor:"#EAF1FA",color:"#1366DE",cursor:"pointer"}:{cursor:"default"},bg:x==j.DOCTOR?"blue.100":"white",color:x==j.DOCTOR?"#1366DE":"gray",fontWeight:x==j.DOCTOR?"bold":"",fontSize:"10px",textAlign:"center",onClick:()=>C(j.DOCTOR),children:"Doctor"})]})}),w.map(s=>e.jsxs(r,{w:"100%",children:[e.jsx(r,{w:"100%",p:"8px",fontSize:"16px",fontWeight:"bold",borderBottom:"1px solid #ECEDED",children:oe(s)?P(s):s}),e.jsx(a,{w:"auto",h:"30vh",p:"8px",align:"center",overflowX:"scroll",children:u[s].map(c=>e.jsxs(r,{mr:"8px",w:"13vw",h:"100%",p:"8px",flex:"0 0 auto",borderRadius:"xl",bg:"white",children:[e.jsxs(a,{w:"100%",h:"25%",p:"4px",borderBottom:"1px solid #ECEDED",justify:"space-between",children:[e.jsxs(r,{w:"50%",children:[e.jsx(r,{fontSize:"11px",color:"gray",children:"Prescription code"}),e.jsx(r,{fontSize:"12px",fontWeight:"bold",children:c.id})]}),e.jsxs(r,{w:"50%",textAlign:"right",children:[e.jsx(r,{fontSize:"11px",color:"gray",children:"Date of issue"}),e.jsx(r,{fontSize:"12px",fontWeight:"bold",children:P(c.date)})]})]}),e.jsxs(r,{w:"100%",h:"25%",p:"8px 4px",borderBottom:"1px solid #ECEDED",children:[e.jsx(r,{fontSize:"11px",color:"gray",children:"Issued by"}),e.jsxs(r,{fontSize:"12px",fontWeight:"bold",children:["Dr. ",c.doctor_name]})]}),e.jsxs(r,{w:"100%",h:"50%",px:"4px",py:"16px",children:[e.jsx(r,{fontSize:"11px",color:"gray",children:"Medication and Dosage"}),e.jsxs(r,{w:"100%",h:"95%",p:"8px",borderLeft:"1px solid green",fontSize:"12px",children:[e.jsx(r,{fontWeight:"bold",children:c.medication_name}),e.jsx(r,{color:"gray",children:`${c.dose}, ${c.pill_per_day}`}),e.jsx(r,{fontSize:"10px",overflow:"hidden",children:c.recommendation})]})]})]},c.id))})]},s))]})]})}const I={};function Se({medical_info:t,icd:i,paginator:n}){const[o,l]=h.useState(0),d={selected:o,setSelected:l};return h.useMemo(()=>{i.forEach(E=>{I[E.icd_code]=E})},[i]),e.jsxs(Q,{state:"records",children:[e.jsx(r,{w:"55%",h:"97vh",children:e.jsx(r,{w:"100%",h:"100%",p:"4px 8px",children:o===0?e.jsx(M,{selectManager:d,medicalInfo:t||[],paginator:n}):e.jsx(ie,{selectManager:d,medicalInfo:t||[],icd:I})})}),e.jsx(r,{w:"32%",h:"97vh",p:"4px",children:o===0?"":e.jsx(M,{selectManager:d,medicalInfo:t||[],paginator:n})})]})}export{Se as default};
