import{r as de,j as m,A as ye,y as Me,a as ve,i as Re,z as De,c as xe,f as Ie,B as ge}from"./app-N0IZS1ru.js";import"./lodash-BTabCQi1.js";import{u as Te}from"./chunk-7JBTTEVG-BsaYSUU7.js";import{g as se,w as pe,T as je,M as Ve,u as ke,d as We,e as Ne,a as Oe,b as Le,c as He}from"./chunk-4FCEGNGT-Cenok10X.js";import{M as ze}from"./chunk-5FG5SY5K-DcNZxAFh.js";import{F as be,B as ce}from"./chunk-KRPLQIP4-BH_xlcLD.js";var fe={exit:{duration:.15,ease:je.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},Ae={exit:({direction:d,transition:n,transitionEnd:f,delay:h})=>{var e;const{exit:x}=se({direction:d});return{...x,transition:(e=n==null?void 0:n.exit)!=null?e:pe.exit(fe.exit,h),transitionEnd:f==null?void 0:f.exit}},enter:({direction:d,transitionEnd:n,transition:f,delay:h})=>{var e;const{enter:x}=se({direction:d});return{...x,transition:(e=f==null?void 0:f.enter)!=null?e:pe.enter(fe.enter,h),transitionEnd:n==null?void 0:n.enter}}},_e=de.forwardRef(function(n,f){const{direction:h="right",style:e,unmountOnExit:x,in:A,className:B,transition:E,transitionEnd:F,delay:re,motionProps:oe,...ue}=n,ne=se({direction:h}),le=Object.assign({position:"fixed"},ne.position,e),t=x?A&&x:!0,i=A||x?"enter":"exit",u={transitionEnd:F,transition:E,direction:h,delay:re};return m.jsx(ye,{custom:u,children:t&&m.jsx(Me.div,{...ue,ref:f,initial:"exit",className:ve("chakra-slide",B),animate:i,exit:"exit",custom:u,variants:Ae,style:le,...oe})})});_e.displayName="Slide";var[Be,Fe]=Re(),Ue={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function Je(d,n){var f,h;if(d)return(h=(f=Ue[d])==null?void 0:f[n])!=null?h:d}function $e(d){var n;const{isOpen:f,onClose:h,placement:e="right",children:x,...A}=d,B=De(),E=(n=B.components)==null?void 0:n.Drawer,F=Je(e,B.direction);return m.jsx(Be,{value:{placement:F},children:m.jsx(Ve,{isOpen:f,onClose:h,styleConfig:E,...A,children:x})})}var qe=xe(_e),Pe=Ie((d,n)=>{const{className:f,children:h,motionProps:e,containerProps:x,...A}=d,{getDialogProps:B,getDialogContainerProps:E,isOpen:F}=ke(),re=B(A,n),oe=E(x),ue=ve("chakra-modal__content",f),ne=We(),le={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...ne.dialog},t={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...ne.dialogContainer},{placement:i}=Fe();return m.jsx(Ne,{children:m.jsx(xe.div,{...oe,className:"chakra-modal__content-container",__css:t,children:m.jsx(qe,{motionProps:e,direction:i,in:F,className:ue,...re,__css:le,children:h})})})});Pe.displayName="DrawerContent";var we={exports:{}},Se={};(function(d){var n=ge;function f(t){var i=Object.create(null);return t&&Object.keys(t).forEach(function(u){if(u!=="default"){var a=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(i,u,a.get?a:{enumerable:!0,get:function(){return t[u]}})}}),i.default=t,Object.freeze(i)}var h,e=f(de);d.ThumbnailDirection=void 0,(h=d.ThumbnailDirection||(d.ThumbnailDirection={})).Horizontal="Horizontal",h.Vertical="Vertical";var x=function(){return x=Object.assign||function(t){for(var i,u=1,a=arguments.length;u<a;u++)for(var g in i=arguments[u])Object.prototype.hasOwnProperty.call(i,g)&&(t[g]=i[g]);return t},x.apply(this,arguments)},A=function(t){var i=t.doc,u=t.getPageIndex,a=t.renderSpinner,g=t.store,o=t.width,y=i.numPages,_=u?u({numPages:y}):0,v=Math.max(0,Math.min(_,y-1)),P=g.get("pagesRotation")||new Map,N=P.has(v)?P.get(v):0,I=e.useState(""),j=I[0],s=I[1],z=n.useIsMounted(),T=e.useRef(),p=e.useState(g.get("rotation")||0),M=p[0],w=p[1],S=e.useState(N),V=S[0],b=S[1],k=e.useState(!1),q=k[0],O=k[1],U=function(C){var L=C.has(v)?C.get(v):0;b(L)},X=function(C){w(C)},Y=n.useIntersectionObserver({onVisibilityChanged:function(C){O(C.isVisible)}});return e.useEffect(function(){if(q){var C=Y.current;C&&(s(""),n.getPage(i,v).then(function(L){var R=L.getViewport({scale:1}),J=(R.rotation+M+V)%360,Z=Math.abs(M+V)%180==0,G=Z?R.width:R.height,ee=Z?R.height:R.width,H=document.createElement("canvas"),ae=H.getContext("2d",{alpha:!1}),ie=C.clientWidth,te=C.clientHeight,l=o?o/G:Math.min(ie/G,te/ee),r=l*G,D=l*ee;H.height=D,H.width=r,H.style.opacity="0";var $=L.getViewport({rotation:J,scale:l});T.current=L.render({canvasContext:ae,viewport:$}),T.current.promise.then(function(){z.current&&s(H.toDataURL()),H.width=0,H.height=0},function(){})}))}},[V,q]),e.useEffect(function(){return g.subscribe("pagesRotation",U),g.subscribe("rotation",X),function(){g.unsubscribe("pagesRotation",U),g.unsubscribe("rotation",X)}},[]),e.useEffect(function(){return function(){var C;(C=T.current)===null||C===void 0||C.cancel()}},[]),e.createElement("div",{ref:Y,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},j?e.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:j}):e.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},a?a():e.createElement(n.Spinner,null)))},B=function(t){var i=t.getPageIndex,u=t.renderSpinner,a=t.store,g=t.width,o=e.useState(a.get("doc")),y=o[0],_=o[1],v=function(P){_(P)};return e.useEffect(function(){return a.subscribe("doc",v),function(){a.unsubscribe("doc",v)}},[]),e.createElement("div",{className:"rpv-thumbnail__cover"},y?e.createElement(A,{doc:y,getPageIndex:i,renderSpinner:u,store:a,width:g}):e.createElement("div",{className:"rpv-thumbnail__cover-loader"},u?u():e.createElement(n.Spinner,null)))},E=function(){return e.createElement(n.Spinner,null)},F=e.createContext({renderSpinner:E}),re=function(t){var i=t.children,u=t.doc,a=n.useIsMounted(),g=e.useState({loading:!0,labels:[]}),o=g[0],y=g[1];return e.useEffect(function(){u.getPageLabels().then(function(_){a.current&&y({loading:!1,labels:_||[]})})},[u.loadingTask.docId]),o.loading?e.createElement(e.Fragment,null):i(o.labels)},oe=function(t){var i=t.page,u=t.pageHeight,a=t.pageIndex,g=t.pageWidth,o=t.rotation,y=t.thumbnailHeight,_=t.thumbnailWidth,v=t.onRenderCompleted,P=e.useContext(n.LocalizationContext).l10n,N=e.useRef(),I=e.useState(""),j=I[0],s=I[1],z=P&&P.thumbnail?P.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return e.useEffect(function(){var T=N.current;T&&T.cancel();var p=document.createElement("canvas"),M=p.getContext("2d",{alpha:!1}),w=_,S=w/(g/u),V=w/g;p.height=S,p.width=w,p.style.height="".concat(S,"px"),p.style.width="".concat(w,"px");var b=i.getViewport({rotation:o,scale:V});return N.current=i.render({canvasContext:M,viewport:b}),N.current.promise.then(function(){s(p.toDataURL()),v(a)},function(){v(a)}),function(){var k;(k=N.current)===null||k===void 0||k.cancel()}},[o]),j?e.createElement("img",{"aria-label":z.replace("{{pageIndex}}","".concat(a+1)),src:j,height:"".concat(y,"px"),width:"".concat(_,"px")}):e.useContext(F).renderSpinner()},ue=function(t){var i=t.doc,u=t.pageHeight,a=t.pageIndex,g=t.pageRotation,o=t.pageWidth,y=t.rotation,_=t.shouldRender,v=t.thumbnailWidth,P=t.onRenderCompleted,N=t.onVisibilityChanged,I=n.useIsMounted(),j=e.useState({height:u,page:null,viewportRotation:0,width:o}),s=j[0],z=j[1],T=s.page,p=s.height,M=s.width,w=M/p,S=Math.abs(y+g)%180==0,V=S?v:v/w,b=S?v/w:v;e.useEffect(function(){_&&n.getPage(i,a).then(function(O){var U=O.getViewport({scale:1});I.current&&z({height:U.height,page:O,viewportRotation:U.rotation,width:U.width})})},[_]);var k=(s.viewportRotation+y+g)%360,q=n.useIntersectionObserver({onVisibilityChanged:function(O){N(a,O)}});return e.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(a),ref:q,style:{height:"".concat(b,"px"),width:"".concat(V,"px")}},T?e.createElement(oe,{page:T,pageHeight:S?p:M,pageIndex:a,pageWidth:S?M:p,rotation:k,thumbnailHeight:b,thumbnailWidth:V,onRenderCompleted:P}):e.useContext(F).renderSpinner())},ne=function(t){var i=t.currentPage,u=t.doc,a=t.labels,g=t.pagesRotation,o=t.pageHeight,y=t.pageWidth,_=t.renderCurrentPageLabel,v=t.renderThumbnailItem,P=t.rotatedPage,N=t.rotation,I=t.thumbnailDirection,j=t.thumbnailWidth,s=t.viewMode,z=t.onJumpToPage,T=t.onRotatePage,p=u.numPages,M=u.loadingTask.docId,w=e.useRef(null),S=e.useRef([]),V=e.useState(i),b=V[0],k=V[1],q=e.useContext(n.ThemeContext).direction===n.TextDirection.RightToLeft,O=e.useState(-1),U=O[0],X=O[1],Y=n.useIsMounted(),C=n.usePrevious(s),L=e.useRef(!1),R=n.useRenderQueue({doc:u}),J=e.useMemo(function(){return Array(p).fill(0).map(function(l,r){return r})},[M]),Z=e.useMemo(function(){switch(s){case n.ViewMode.DualPage:return n.chunk(J,2);case n.ViewMode.DualPageWithCover:return[[J[0]]].concat(n.chunk(J.slice(1),2));case n.ViewMode.SinglePage:default:return n.chunk(J,1)}},[M,s]),G=function(){if(w.current){var l=S.current,r=b+1;r<l.length&&(b>=0&&l[b].setAttribute("tabindex","-1"),k(r))}},ee=function(){if(w.current){var l=S.current,r=b-1;r>=0&&(b>=0&&l[b].setAttribute("tabindex","-1"),k(r))}},H=function(){b>=0&&b<p&&z(b)};n.useIsomorphicLayoutEffect(function(){var l=w.current;l&&(S.current=Array.from(l.querySelectorAll(".rpv-thumbnail__item")))},[s]),e.useEffect(function(){var l=S.current;if(!(l.length===0||b<0||b>l.length)){var r=l[b];r.setAttribute("tabindex","0"),r.focus()}},[b]),n.useIsomorphicLayoutEffect(function(){var l=w.current,r=S.current;if(!(!l||r.length===0||i<0||i>r.length)){var D=r[i].closest(".rpv-thumbnail__items");D&&(I===d.ThumbnailDirection.Vertical?function($,c){var W=$.getBoundingClientRect().top-c.getBoundingClientRect().top,K=$.clientHeight,Q=c.clientHeight;W<0?c.scrollTop+=W:W+K<=Q||(c.scrollTop+=W+K-Q)}(D,l):function($,c){var W=$.getBoundingClientRect().left-c.getBoundingClientRect().left,K=$.clientWidth,Q=c.clientWidth;W<0?c.scrollLeft+=W:W+K<=Q||(c.scrollLeft+=W+K-Q)}(D,l))}},[i,I]);var ae=e.useCallback(function(l){Y.current&&(R.markRendered(l),L.current=!1,te())},[M]),ie=e.useCallback(function(l,r){r.isVisible?R.setVisibility(l,r.ratio):R.setOutOfRange(l),te()},[M]),te=e.useCallback(function(){if(!L.current){var l=R.getHighestPriorityPage();l>-1&&(R.markRendering(l),L.current=!0,X(l))}},[M]);return e.useEffect(function(){P>=0&&(R.markRendering(P),L.current=!0,X(P))},[M,P]),n.useIsomorphicLayoutEffect(function(){C!==s&&(R.markNotRendered(),te())},[s]),e.createElement("div",{ref:w,"data-testid":"thumbnail__list",className:n.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":I===d.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":q,"rpv-thumbnail__list--vertical":I===d.ThumbnailDirection.Vertical}),onKeyDown:function(l){switch(l.key){case"ArrowDown":G();break;case"ArrowUp":ee();break;case"Enter":H()}}},Z.map(function(l,r){var D=!1;switch(s){case n.ViewMode.DualPage:D=i===2*r||i===2*r+1;break;case n.ViewMode.DualPageWithCover:D=i===0&&r===0||r>0&&i===2*r-1||r>0&&i===2*r;break;case n.ViewMode.SinglePage:default:D=i===r}return e.createElement("div",{className:n.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":s===n.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":s===n.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":s===n.ViewMode.SinglePage,"rpv-thumbnail__items--selected":D}),key:"".concat(r,"___").concat(s)},l.map(function($){return function(c){var W=s===n.ViewMode.DualPageWithCover&&(c===0||p%2==0&&c===p-1),K="".concat(u.loadingTask.docId,"___").concat(c),Q=a.length===p?a[c]:"".concat(c+1),he=_?_({currentPage:i,pageIndex:c,numPages:p,pageLabel:Q}):Q,Ce=g.has(c)?g.get(c):0,me=e.createElement(ue,{doc:u,pageHeight:o,pageIndex:c,pageRotation:Ce,pageWidth:y,rotation:N,shouldRender:U===c,thumbnailWidth:j,onRenderCompleted:ae,onVisibilityChanged:ie});return v?v({currentPage:i,key:K,numPages:p,pageIndex:c,renderPageLabel:e.createElement(e.Fragment,null,he),renderPageThumbnail:me,onJumpToPage:function(){return z(c)},onRotatePage:function(Ee){return T(c,Ee)}}):e.createElement("div",{key:K},e.createElement("div",{className:n.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":s===n.ViewMode.DualPage&&c%2==0,"rpv-thumbnail__item--dual-odd":s===n.ViewMode.DualPage&&c%2==1,"rpv-thumbnail__item--dual-cover":W,"rpv-thumbnail__item--dual-cover-even":s===n.ViewMode.DualPageWithCover&&!W&&c%2==0,"rpv-thumbnail__item--dual-cover-odd":s===n.ViewMode.DualPageWithCover&&!W&&c%2==1,"rpv-thumbnail__item--single":s===n.ViewMode.SinglePage,"rpv-thumbnail__item--selected":i===c}),role:"button",tabIndex:i===c?0:-1,onClick:function(){return z(c)}},me),e.createElement("div",{"data-testid":"thumbnail__label-".concat(c),className:"rpv-thumbnail__label"},he))}($)}))}))},le=function(t){var i=t.renderCurrentPageLabel,u=t.renderThumbnailItem,a=t.store,g=t.thumbnailDirection,o=t.thumbnailWidth,y=e.useState(a.get("doc")),_=y[0],v=y[1],P=e.useState(a.get("currentPage")||0),N=P[0],I=P[1],j=e.useState(a.get("pageHeight")||0),s=j[0],z=j[1],T=e.useState(a.get("pageWidth")||0),p=T[0],M=T[1],w=e.useState(a.get("rotation")||0),S=w[0],V=w[1],b=e.useState(a.get("pagesRotation")||new Map),k=b[0],q=b[1],O=e.useState(a.get("rotatedPage")||-1),U=O[0],X=O[1],Y=e.useState(a.get("viewMode")),C=Y[0],L=Y[1],R=function(r){I(r)},J=function(r){v(r)},Z=function(r){z(r)},G=function(r){M(r)},ee=function(r){V(r)},H=function(r){q(r)},ae=function(r){X(r)},ie=function(r){L(r)},te=function(r){var D=a.get("jumpToPage");D&&D(r)},l=function(r,D){a.get("rotatePage")(r,D)};return e.useEffect(function(){return a.subscribe("doc",J),a.subscribe("pageHeight",Z),a.subscribe("pageWidth",G),a.subscribe("rotatedPage",ae),a.subscribe("rotation",ee),a.subscribe("pagesRotation",H),a.subscribe("viewMode",ie),function(){a.unsubscribe("doc",J),a.unsubscribe("pageHeight",Z),a.unsubscribe("pageWidth",G),a.unsubscribe("rotatedPage",ae),a.unsubscribe("rotation",ee),a.unsubscribe("pagesRotation",H),a.unsubscribe("viewMode",ie)}},[]),n.useIsomorphicLayoutEffect(function(){return a.subscribe("currentPage",R),function(){a.unsubscribe("currentPage",R)}},[]),_?e.createElement(n.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},e.createElement(re,{doc:_},function(r){return e.createElement(ne,{currentPage:N,doc:_,labels:r,pagesRotation:k,pageHeight:s,pageWidth:p,renderCurrentPageLabel:i,renderThumbnailItem:u,rotatedPage:U,rotation:S,thumbnailDirection:g,thumbnailWidth:o,viewMode:C,onJumpToPage:te,onRotatePage:l})})):e.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},e.useContext(F).renderSpinner())};d.thumbnailPlugin=function(t){var i=e.useMemo(function(){return n.createStore({rotatePage:function(){},viewMode:n.ViewMode.SinglePage})},[]),u=e.useState(""),a=u[0],g=u[1];return{install:function(o){i.update("jumpToPage",o.jumpToPage),i.update("rotatePage",o.rotatePage)},onDocumentLoad:function(o){g(o.doc.loadingTask.docId),i.update("doc",o.doc)},onViewerStateChange:function(o){return i.update("currentPage",o.pageIndex),i.update("pagesRotation",o.pagesRotation),i.update("pageHeight",o.pageHeight),i.update("pageWidth",o.pageWidth),i.update("rotation",o.rotation),i.update("rotatedPage",o.rotatedPage),i.update("viewMode",o.viewMode),o},Cover:function(o){return e.createElement(B,x({},o,{renderSpinner:t==null?void 0:t.renderSpinner,store:i}))},Thumbnails:e.useCallback(function(o){return e.createElement(F.Provider,{value:{renderSpinner:(t==null?void 0:t.renderSpinner)||E}},e.createElement(le,{renderCurrentPageLabel:t==null?void 0:t.renderCurrentPageLabel,renderThumbnailItem:o==null?void 0:o.renderThumbnailItem,store:i,thumbnailDirection:(o==null?void 0:o.thumbnailDirection)||d.ThumbnailDirection.Vertical,thumbnailWidth:(t==null?void 0:t.thumbnailWidth)||100}))},[a])}}})(Se);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */we.exports=Se;var Ge=we.exports;function Ke(d){const{PageThumbnail:n}=d;return{renderViewer:f=>{let{slot:h}=f;return h.children=n,h.subSlot.attrs={},h.subSlot.children=m.jsx(m.Fragment,{}),h}}}function Qe({fileUrl:d,width:n,pageIndex:f}){const h=Ge.thumbnailPlugin(),{Cover:e}=h,x=Ke({PageThumbnail:m.jsx(e,{width:n,getPageIndex:()=>f})});return m.jsx(ge.Viewer,{fileUrl:d,plugins:[x,h]})}function at({data:d,width:n="50%"}){const[f,h]=de.useState(""),{isOpen:e,onOpen:x,onClose:A}=Te(),B=E=>{h(E),x()};return d.tests.length>0?d.tests.map(E=>m.jsxs(be,{w:n,borderRadius:"xl",bg:"#F2F7FF",align:"center",fontSize:"11px",_hover:{backgroundColor:"#BEE3F8",cursor:"pointer"},onClick:()=>B(E.detail.result_url),children:[m.jsx(ce,{w:"fit-content",children:m.jsx(Qe,{fileUrl:E.detail.result_url,width:40,pageIndex:0})}),m.jsxs(be,{w:"90%",px:"18px",align:"center",justify:"space-between",children:[m.jsx(ce,{fontWeight:"bold",fontSize:"13px",children:E.detail.name}),m.jsx(ce,{fontSize:"12px",color:"gray",children:E.detail.date})]}),m.jsxs($e,{onClose:A,isOpen:e,size:"xl",children:[m.jsx(Oe,{}),m.jsxs(Pe,{children:[m.jsx(Le,{}),m.jsx(ze,{children:`Pdf Viewer - ${E.detail.name}`}),m.jsx(He,{children:m.jsx(ce,{w:"100%",children:m.jsx(ge.Viewer,{fileUrl:f})})})]})]})]},E.detail.id)):m.jsx(ce,{children:"No available test results"})}export{at as t};
