import{f as Fe,u as Oe,o as Be,j as e,c as Le,a as Ae,g as Ne,b as fe,d as $e,r as k,q as ge,W as He}from"./app-B-st9BtI.js";import{G as ve}from"./iconBase-ChLQLo6q.js";import{d as $}from"./dayjs.min-BznShDkh.js";import{r as Ie,M as _e,a as je,b as be,c as we}from"./chunk-4FCEGNGT-Z6ZvjLQp.js";import{D as Ue}from"./DoctorLayout-Dyh4Qz7G.js";import{t as Ye}from"./TestResultList-QtV3dYiC.js";import{_ as G}from"./lodash-CvmcnPJT.js";import{C as ye}from"./chunk-CWVAJCXJ-BsXI6oYP.js";import{u as Ve,F as B,I as ne}from"./chunk-6CVSDS6C-BmeBEkKM.js";import{F as L}from"./chunk-VGESXGVT-CeUiVvbi.js";import{S as ue}from"./chunk-3RSXBRAN-pAIq33XK.js";import{F as v,B as l,a as N}from"./chunk-KRPLQIP4-BlAVN8HP.js";import{M as Ce,a as De}from"./chunk-RAWN7VJ3-Dy4GWyOy.js";import{M as Ee}from"./index-BrEBPJ0Z.js";import{S as H}from"./chunk-ZHMYA64R-DtvKkc4C.js";import{C as qe}from"./chunk-Q6Q7I7E5-B8Zb2bBP.js";import{u as Se}from"./chunk-7JBTTEVG-Jxzi3SVC.js";import{H as ee}from"./chunk-3ASUQ6PA-BuiPcMK8.js";import{U as Ge,B as Xe}from"./index-C977uZpW.js";import"./defineProperty-DmAPQKcv.js";import"./Logo-xk-lhgy1.js";import"./index-DdrsuNi1.js";import"./index-DkwGp1KY.js";function Ze(n,s=[]){const i=Object.assign({},n);for(const t of s)t in i&&delete i[t];return i}var Je=["h","minH","height","minHeight"],ae=Fe((n,s)=>{const i=Oe("Textarea",n),{className:t,rows:o,...c}=Be(n),h=Ve(c),r=o?Ze(i,Je):i;return e.jsx(Le.textarea,{ref:s,rows:o,...h,className:Ae("chakra-textarea",t),__css:r})});ae.displayName="Textarea";function oe(n){return ve({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0.877075 7.49988C0.877075 3.84219 3.84222 0.877045 7.49991 0.877045C11.1576 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1575 0.877075 7.49988ZM7.49991 1.82704C4.36689 1.82704 1.82708 4.36686 1.82708 7.49988C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49988C13.1727 4.36686 10.6329 1.82704 7.49991 1.82704ZM9.85358 5.14644C10.0488 5.3417 10.0488 5.65829 9.85358 5.85355L8.20713 7.49999L9.85358 9.14644C10.0488 9.3417 10.0488 9.65829 9.85358 9.85355C9.65832 10.0488 9.34173 10.0488 9.14647 9.85355L7.50002 8.2071L5.85358 9.85355C5.65832 10.0488 5.34173 10.0488 5.14647 9.85355C4.95121 9.65829 4.95121 9.3417 5.14647 9.14644L6.79292 7.49999L5.14647 5.85355C4.95121 5.65829 4.95121 5.3417 5.14647 5.14644C5.34173 4.95118 5.65832 4.95118 5.85358 5.14644L7.50002 6.79289L9.14647 5.14644C9.34173 4.95118 9.65832 4.95118 9.85358 5.14644Z",fill:"currentColor"},child:[]}]})(n)}function Ke(n){return ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m16 6-4-4-4 4"},child:[]},{tag:"path",attr:{d:"M12 2v8"},child:[]},{tag:"rect",attr:{width:"20",height:"8",x:"2",y:"14",rx:"2"},child:[]},{tag:"path",attr:{d:"M6 18h.01"},child:[]},{tag:"path",attr:{d:"M10 18h.01"},child:[]}]})(n)}var ze={exports:{}};/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function X(n,s,i){this.x=n,this.y=s,this.time=i||new Date().getTime()}X.prototype.velocityFrom=function(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):1};X.prototype.distanceTo=function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))};X.prototype.equals=function(n){return this.x===n.x&&this.y===n.y&&this.time===n.time};function pe(n,s,i,t){this.startPoint=n,this.control1=s,this.control2=i,this.endPoint=t}pe.prototype.length=function(){for(var n=10,s=0,i=void 0,t=void 0,o=0;o<=n;o+=1){var c=o/n,h=this._point(c,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(c,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var p=h-i,d=r-t;s+=Math.sqrt(p*p+d*d)}i=h,t=r}return s};pe.prototype._point=function(n,s,i,t,o){return s*(1-n)*(1-n)*(1-n)+3*i*(1-n)*(1-n)*n+3*t*(1-n)*n*n+o*n*n*n};function Qe(n,s,i){var t,o,c,h=null,r=0;i||(i={});var p=function(){r=i.leading===!1?0:Date.now(),h=null,c=n.apply(t,o),h||(t=o=null)};return function(){var d=Date.now();!r&&i.leading===!1&&(r=d);var u=s-(d-r);return t=this,o=arguments,u<=0||u>s?(h&&(clearTimeout(h),h=null),r=d,c=n.apply(t,o),h||(t=o=null)):!h&&i.trailing!==!1&&(h=setTimeout(p,u)),c}}function E(n,s){var i=this,t=s||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=Qe(E.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=E.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=n,this._ctx=n.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(i._mouseButtonDown=!0,i._strokeBegin(o))},this._handleMouseMove=function(o){i._mouseButtonDown&&i._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var c=o.changedTouches[0];i._strokeBegin(c)}},this._handleTouchMove=function(o){o.preventDefault();var c=o.targetTouches[0];i._strokeMoveUpdate(c)},this._handleTouchEnd=function(o){var c=o.target===i._canvas;c&&(o.preventDefault(),i._strokeEnd(o))},this.on()}E.prototype.clear=function(){var n=this._ctx,s=this._canvas;n.fillStyle=this.backgroundColor,n.clearRect(0,0,s.width,s.height),n.fillRect(0,0,s.width,s.height),this._data=[],this._reset(),this._isEmpty=!0};E.prototype.fromDataURL=function(n){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,o=i.ratio||window.devicePixelRatio||1,c=i.width||this._canvas.width/o,h=i.height||this._canvas.height/o;this._reset(),t.src=n,t.onload=function(){s._ctx.drawImage(t,0,0,c,h)},this._isEmpty=!1};E.prototype.toDataURL=function(n){var s;switch(n){case"image/svg+xml":return this._toSVG();default:for(var i=arguments.length,t=Array(i>1?i-1:0),o=1;o<i;o++)t[o-1]=arguments[o];return(s=this._canvas).toDataURL.apply(s,[n].concat(t))}};E.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};E.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};E.prototype.isEmpty=function(){return this._isEmpty};E.prototype._strokeBegin=function(n){this._data.push([]),this._reset(),this._strokeUpdate(n),typeof this.onBegin=="function"&&this.onBegin(n)};E.prototype._strokeUpdate=function(n){var s=n.clientX,i=n.clientY,t=this._createPoint(s,i),o=this._data[this._data.length-1],c=o&&o[o.length-1],h=c&&t.distanceTo(c)<this.minDistance;if(!(c&&h)){var r=this._addPoint(t),p=r.curve,d=r.widths;p&&d&&this._drawCurve(p,d.start,d.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};E.prototype._strokeEnd=function(n){var s=this.points.length>2,i=this.points[0];if(!s&&i&&this._drawDot(i),i){var t=this._data[this._data.length-1],o=t[t.length-1];i.equals(o)||t.push({x:i.x,y:i.y,time:i.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(n)};E.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};E.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};E.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};E.prototype._createPoint=function(n,s,i){var t=this._canvas.getBoundingClientRect();return new X(n-t.left,s-t.top,i||new Date().getTime())};E.prototype._addPoint=function(n){var s=this.points,i=void 0;if(s.push(n),s.length>2){s.length===3&&s.unshift(s[0]),i=this._calculateCurveControlPoints(s[0],s[1],s[2]);var t=i.c2;i=this._calculateCurveControlPoints(s[1],s[2],s[3]);var o=i.c1,c=new pe(s[1],t,o,s[2]),h=this._calculateCurveWidths(c);return s.shift(),{curve:c,widths:h}}return{}};E.prototype._calculateCurveControlPoints=function(n,s,i){var t=n.x-s.x,o=n.y-s.y,c=s.x-i.x,h=s.y-i.y,r={x:(n.x+s.x)/2,y:(n.y+s.y)/2},p={x:(s.x+i.x)/2,y:(s.y+i.y)/2},d=Math.sqrt(t*t+o*o),u=Math.sqrt(c*c+h*h),x=r.x-p.x,f=r.y-p.y,y=u/(d+u),C={x:p.x+x*y,y:p.y+f*y},D=s.x-C.x,S=s.y-C.y;return{c1:new X(r.x+D,r.y+S),c2:new X(p.x+D,p.y+S)}};E.prototype._calculateCurveWidths=function(n){var s=n.startPoint,i=n.endPoint,t={start:null,end:null},o=this.velocityFilterWeight*i.velocityFrom(s)+(1-this.velocityFilterWeight)*this._lastVelocity,c=this._strokeWidth(o);return t.start=this._lastWidth,t.end=c,this._lastVelocity=o,this._lastWidth=c,t};E.prototype._strokeWidth=function(n){return Math.max(this.maxWidth/(n+1),this.minWidth)};E.prototype._drawPoint=function(n,s,i){var t=this._ctx;t.moveTo(n,s),t.arc(n,s,i,0,2*Math.PI,!1),this._isEmpty=!1};E.prototype._drawCurve=function(n,s,i){var t=this._ctx,o=i-s,c=Math.floor(n.length());t.beginPath();for(var h=0;h<c;h+=1){var r=h/c,p=r*r,d=p*r,u=1-r,x=u*u,f=x*u,y=f*n.startPoint.x;y+=3*x*r*n.control1.x,y+=3*u*p*n.control2.x,y+=d*n.endPoint.x;var C=f*n.startPoint.y;C+=3*x*r*n.control1.y,C+=3*u*p*n.control2.y,C+=d*n.endPoint.y;var D=s+d*o;this._drawPoint(y,C,D)}t.closePath(),t.fill()};E.prototype._drawDot=function(n){var s=this._ctx,i=typeof this.dotSize=="function"?this.dotSize():this.dotSize;s.beginPath(),this._drawPoint(n.x,n.y,i),s.closePath(),s.fill()};E.prototype._fromData=function(n,s,i){for(var t=0;t<n.length;t+=1){var o=n[t];if(o.length>1)for(var c=0;c<o.length;c+=1){var h=o[c],r=new X(h.x,h.y,h.time),p=h.color;if(c===0)this.penColor=p,this._reset(),this._addPoint(r);else if(c!==o.length-1){var d=this._addPoint(r),u=d.curve,x=d.widths;u&&x&&s(u,x,p)}}else{this._reset();var f=o[0];i(f)}}};E.prototype._toSVG=function(){var n=this,s=this._data,i=this._canvas,t=Math.max(window.devicePixelRatio||1,1),o=0,c=0,h=i.width/t,r=i.height/t,p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttributeNS(null,"width",i.width),p.setAttributeNS(null,"height",i.height),this._fromData(s,function(g,P,W){var _=document.createElement("path");if(!isNaN(g.control1.x)&&!isNaN(g.control1.y)&&!isNaN(g.control2.x)&&!isNaN(g.control2.y)){var F="M "+g.startPoint.x.toFixed(3)+","+g.startPoint.y.toFixed(3)+" "+("C "+g.control1.x.toFixed(3)+","+g.control1.y.toFixed(3)+" ")+(g.control2.x.toFixed(3)+","+g.control2.y.toFixed(3)+" ")+(g.endPoint.x.toFixed(3)+","+g.endPoint.y.toFixed(3));_.setAttribute("d",F),_.setAttribute("stroke-width",(P.end*2.25).toFixed(3)),_.setAttribute("stroke",W),_.setAttribute("fill","none"),_.setAttribute("stroke-linecap","round"),p.appendChild(_)}},function(g){var P=document.createElement("circle"),W=typeof n.dotSize=="function"?n.dotSize():n.dotSize;P.setAttribute("r",W),P.setAttribute("cx",g.x),P.setAttribute("cy",g.y),P.setAttribute("fill",g.color),p.appendChild(P)});var d="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+c+" "+h+" "+r+'"')+(' width="'+h+'"')+(' height="'+r+'"')+">",x=p.innerHTML;if(x===void 0){var f=document.createElement("dummy"),y=p.childNodes;f.innerHTML="";for(var C=0;C<y.length;C+=1)f.appendChild(y[C].cloneNode(!0));x=f.innerHTML}var D="</svg>",S=u+x+D;return d+btoa(S)};E.prototype.fromData=function(n){var s=this;this.clear(),this._fromData(n,function(i,t){return s._drawCurve(i,t.start,t.end)},function(i){return s._drawDot(i)}),this._data=n};E.prototype.toData=function(){return this._data};const et=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"})),tt=Ne(et);var ce={exports:{}},me;function it(){return me||(me=1,function(n,s){(function(i,t){n.exports=t()})(fe,function(){return function(i){function t(c){if(o[c])return o[c].exports;var h=o[c]={exports:{},id:c,loaded:!1};return i[c].call(h.exports,h,h.exports,t),h.loaded=!0,h.exports}var o={};return t.m=i,t.c=o,t.p="",t(0)}([function(i,t){function o(d){var u=d.getContext("2d"),x=d.width,f=d.height,y=u.getImageData(0,0,x,f).data,C=r(!0,x,f,y),D=r(!1,x,f,y),S=p(!0,x,f,y),g=p(!1,x,f,y),P=g-S+1,W=D-C+1,_=u.getImageData(S,C,P,W);return d.width=P,d.height=W,u.clearRect(0,0,P,W),u.putImageData(_,0,0),d}function c(d,u,x,f){return{red:f[4*(x*u+d)],green:f[4*(x*u+d)+1],blue:f[4*(x*u+d)+2],alpha:f[4*(x*u+d)+3]}}function h(d,u,x,f){return c(d,u,x,f).alpha}function r(d,u,x,f){for(var y=d?1:-1,C=d?0:x-1,D=C;d?D<x:D>-1;D+=y)for(var S=0;S<u;S++)if(h(S,D,u,f))return D;return null}function p(d,u,x,f){for(var y=d?1:-1,C=d?0:u-1,D=C;d?D<u:D>-1;D+=y)for(var S=0;S<x;S++)if(h(D,S,u,f))return D;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}])})}(ce)),ce.exports}(function(n,s){(function(i,t){n.exports=t(Ie(),k,tt,it())})(fe,function(i,t,o,c){return function(h){function r(d){if(p[d])return p[d].exports;var u=p[d]={exports:{},id:d,loaded:!1};return h[d].call(u.exports,u,u.exports,r),u.loaded=!0,u.exports}var p={};return r.m=h,r.c=p,r.p="",r(0)}([function(h,r,p){function d(w){return w&&w.__esModule?w:{default:w}}function u(w,j){var T={};for(var z in w)j.indexOf(z)>=0||Object.prototype.hasOwnProperty.call(w,z)&&(T[z]=w[z]);return T}function x(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")}function f(w,j){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||typeof j!="object"&&typeof j!="function"?w:j}function y(w,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);w.prototype=Object.create(j&&j.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(w,j):w.__proto__=j)}Object.defineProperty(r,"__esModule",{value:!0});var C=Object.assign||function(w){for(var j=1;j<arguments.length;j++){var T=arguments[j];for(var z in T)Object.prototype.hasOwnProperty.call(T,z)&&(w[z]=T[z])}return w},D=function(){function w(j,T){for(var z=0;z<T.length;z++){var m=T[z];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(j,m.key,m)}}return function(j,T,z){return T&&w(j.prototype,T),z&&w(j,z),j}}(),S=p(1),g=d(S),P=p(2),W=d(P),_=p(3),F=d(_),I=p(4),le=d(I),K=function(w){function j(){var T,z,m,re;x(this,j);for(var se=arguments.length,U=Array(se),Z=0;Z<se;Z++)U[Z]=arguments[Z];return z=m=f(this,(T=j.__proto__||Object.getPrototypeOf(j)).call.apply(T,[this].concat(U))),m._sigPad=null,m._excludeOurProps=function(){var R=m.props,O=(R.canvasProps,R.clearOnResize,u(R,["canvasProps","clearOnResize"]));return O},m.getCanvas=function(){return m._canvas},m.getTrimmedCanvas=function(){var R=document.createElement("canvas");return R.width=m._canvas.width,R.height=m._canvas.height,R.getContext("2d").drawImage(m._canvas,0,0),(0,le.default)(R)},m.getSignaturePad=function(){return m._sigPad},m._checkClearOnResize=function(){m.props.clearOnResize&&m._resizeCanvas()},m._resizeCanvas=function(){var R=m.props.canvasProps||{},O=R.width,Q=R.height;if(!O||!Q){var q=m._canvas,J=Math.max(window.devicePixelRatio||1,1);O||(q.width=q.offsetWidth*J),Q||(q.height=q.offsetHeight*J),q.getContext("2d").scale(J,J),m.clear()}},m.on=function(){return window.addEventListener("resize",m._checkClearOnResize),m._sigPad.on()},m.off=function(){return window.removeEventListener("resize",m._checkClearOnResize),m._sigPad.off()},m.clear=function(){return m._sigPad.clear()},m.isEmpty=function(){return m._sigPad.isEmpty()},m.fromDataURL=function(R,O){return m._sigPad.fromDataURL(R,O)},m.toDataURL=function(R,O){return m._sigPad.toDataURL(R,O)},m.fromData=function(R){return m._sigPad.fromData(R)},m.toData=function(){return m._sigPad.toData()},re=z,f(m,re)}return y(j,w),D(j,[{key:"componentDidMount",value:function(){this._sigPad=new F.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var T=this,z=this.props.canvasProps;return W.default.createElement("canvas",C({ref:function(m){T._canvas=m}},z))}}]),j}(P.Component);K.propTypes={velocityFilterWeight:g.default.number,minWidth:g.default.number,maxWidth:g.default.number,minDistance:g.default.number,dotSize:g.default.oneOfType([g.default.number,g.default.func]),penColor:g.default.string,throttle:g.default.number,onEnd:g.default.func,onBegin:g.default.func,canvasProps:g.default.object,clearOnResize:g.default.bool},K.defaultProps={clearOnResize:!0},r.default=K},function(h,r){h.exports=i},function(h,r){h.exports=t},function(h,r){h.exports=o},function(h,r){h.exports=c}])})})(ze);var nt=ze.exports;const rt=$e(nt),st=$().hour(0).minute(0).second(0).millisecond(0),ot=(n,s,i)=>{let t=$(s).hour(8).minute(0).second(0).millisecond(0),o=0;const c=i.split(" "),h=Number(c[0]),r=c[1],p=[];for(;t.format("HH:mm:ss")!=="23:00:00";)if(o<n.length){const d=n[o],u=$(`${d.date} ${d.start_time}`).millisecond(0);u.diff(t)==0?(p.push({start_time:d.start_time,end_time:d.end_time,state:"unavailable"}),t=u.add(h,r),o++):$().add(30,"minute").diff(t)>=0?(p.push({start_time:t.format("HH:mm:ss"),end_time:t.add(h,r).format("HH:mm:ss"),state:"unavailable"}),t=t.add(h,r)):(p.push({start_time:t.format("HH:mm:ss"),end_time:t.add(h,r).format("HH:mm:ss"),state:"free"}),t=t.add(h,r))}else $().millisecond(0).add(30,"minute").diff(t)>=0?(p.push({start_time:t.format("HH:mm:ss"),end_time:t.add(h,r).format("HH:mm:ss"),state:"unavailable"}),t=t.add(h,r)):(p.push({start_time:t.format("HH:mm:ss"),end_time:t.add(h,r).format("HH:mm:ss"),state:"free"}),t=t.add(h,r));return p};let te=[];function at({dataManager:n}){const{get:s,data:i,setData:t,errors:o,setError:c,clearErrors:h,reset:r,processing:p}=n,{isOpen:d,onOpen:u,onClose:x}=Se(),[f,y]=k.useState({}),[C,D]=k.useState({}),{flash:S}=ge().props,g=()=>{y({}),t({...i,duration:"",recurringDate:""}),te=[],x()},P=()=>{if(i.duration!=""){if(i.duration=="custom"&&i.recurringDate==""){c("recurringDate","Please pick a date!");return}else if(i.duration!="custom"){const _=i.duration.split(" "),F=Number(_[0]),I=_[1];i.recurringDate=st.add(F,I).format("YYYY-MM-DD")}s(route("doctor.recurring"),{preserveState:!0,onSuccess:()=>{u()}})}else{c("duration","This field is required!");return}},W=()=>{if(G.isEmpty(f)){c("recurringTime","Please pick a time!");return}t({...i,duration:"",recurringTime:f}),y({}),D(0),te=[],x()};return k.useMemo(()=>{S.appointment&&i.recurringDate&&(te=ot(S.appointment.list,i.recurringDate,S.appointment.service.duration))},[S.appointment]),e.jsxs(e.Fragment,{children:[e.jsxs(v,{w:"100%",p:"16px",align:"center",justify:"space-between",bg:"white",children:[e.jsxs(v,{w:"30%",children:[e.jsx(l,{fontSize:"12px",fontWeight:"bold",me:"4px",children:"Re-visit?"}),e.jsx(ye,{ml:"20px",isDisabled:!G.isEmpty(i.recurringTime),isChecked:i.isReVisit,onChange:()=>{h("duration"),t("isReVisit",!i.isReVisit)}})]}),e.jsxs(B,{isInvalid:o.duration,w:"70%",mr:"2px",children:[e.jsxs(ue,{style:{paddingBottom:"8px"},disabled:!i.isReVisit||!G.isEmpty(i.recurringTime),variant:"filled",borderRadius:"md",fontSize:"10px",w:"100%",size:"sm",value:i.duration,onChange:_=>{t("duration",_.target.value),h("duration")},children:[e.jsx("option",{value:"",children:"Duration"}),e.jsx("option",{value:"1 year",children:"One Year Later"}),e.jsx("option",{value:"1 month",children:"One Month Later"}),e.jsx("option",{value:"1 week",children:"One Week Later"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsx(L,{w:"20vw",fontSize:"10px",children:o.duration})]}),e.jsx(N,{isDisabled:!i.isReVisit||!G.isEmpty(i.recurringTime),colorScheme:"blue",ml:"2px",size:"sm",onClick:P,children:"Pick"}),e.jsxs(_e,{isOpen:d,size:"lg",onClose:g,isCentered:!0,children:[e.jsx(je,{}),e.jsxs(Ce,{children:[e.jsx(Ee,{children:"Please Pick A Time Slot"}),e.jsx(be,{}),e.jsx(we,{children:S.appointment&&te.length>0?e.jsxs(B,{isInvalid:o.recurringTime,w:"100%",h:"50vh",children:[e.jsx(H,{w:"100%",h:"100%",spacing:2,overflow:"scroll",children:te.map((_,F)=>e.jsxs(v,{border:"1px solid #BEE3F8",borderRadius:"xl",w:"100%",h:"auto",mb:"6px",fontSize:"10px",children:[e.jsxs(v,{direction:"column",align:"center",justify:"center",color:_.state=="free"?"#1366DE":"black",bg:_.state=="free"?"#BEE3F8":"gray.500",borderLeftRadius:"xl",w:"45px",h:"7vh",py:"3px",style:{cursor:"default"},children:[e.jsx(l,{children:`${_.start_time.split(":")[0]}:${_.start_time.split(":")[1]}`}),e.jsx(l,{children:"-"}),e.jsx(l,{children:`${_.end_time.split(":")[0]}:${_.end_time.split(":")[1]}`})]}),e.jsx(v,{align:"center",p:"13px 15px",h:"7vh",w:"97%",borderRightRadius:"xl",bg:_.state=="free"?C==F?"#E8F0FC":"white":"gray.300",color:C==F?"#1366DE":"black",onClick:()=>{_.state=="free"&&(y({start_time:_.start_time,end_time:_.end_time}),D(F),h("recurringTime"))},style:_.state=="free"?{cursor:"pointer"}:{cursor:"not-allowed"},_hover:_.state=="free"&&C!=F?{opacity:"0.7",backgroundColor:"#E8F0FC",color:"#1366DE"}:"",children:e.jsx(l,{fontWeight:"bold",children:`${_.state.charAt(0).charAt(0).toUpperCase()}${_.state.slice(1)}`})})]},F))}),e.jsx(L,{w:"20vw",fontSize:"10px",children:o.recurringTime})]}):e.jsx(qe,{mx:"auto",mt:"45%",isIndeterminate:!0,color:"blue.300"})}),e.jsx(De,{children:e.jsxs(v,{justify:"space-between",align:"center",w:"100%",children:[e.jsx(N,{isLoading:p,onClick:W,bg:"blue.400",color:"white",py:"8px",_hover:{background:"blue.500"},children:"Select"}),e.jsx(N,{variant:"ghost",colorScheme:"red",ml:3,onClick:g,children:"Close"})]})})]})]})]}),i.duration==="custom"?e.jsx(l,{w:"96%",borderBottom:"1px solid #ECEDED",py:"8px",ml:"16px",children:e.jsxs(l,{w:"50%",mr:"5%",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Pick a date"}),e.jsx(v,{align:"center",w:"100%",children:e.jsxs(B,{isInvalid:o.recurringDate,w:"100%",mr:"2px",children:[e.jsx(ne,{type:"date",size:"sm",fontSize:"11px",w:"100%",disabled:!i.isReVisit,variant:"filled",borderRadius:"md",value:i.recurringDate,onChange:_=>{t("recurringDate",_.target.value),h("recurringDate")}}),e.jsx(L,{w:"20vw",fontSize:"10px",children:o.recurringDate})]})})]})}):e.jsx(e.Fragment,{})]})}const he={Stable:"black",Fair:"#AF8CFA",Mild:"#FFC999",Severe:"#DE5031"},Y=$().millisecond(0).second(0),xe=n=>{const s=n.split("-");return`${s[2]}.${s[1]}.${s[0]}`},lt=["medication_id","amount","recommendation"],dt=["test_name","test_result","unit"],ie={},V={};function kt({medicalInfo:n,appointment:s,icd:i,medications:t,note:o}){k.useState([]);const c=Object.values(n)[0],{get:h,data:r,post:p,setData:d,errors:u,setError:x,clearErrors:f,reset:y,processing:C}=He({patient_id:c.patient.id,appointment_id:s.id,main_complaint:"",objective_note:"",test_name:"",test_result:"",unit:"",date:Y.format("YYYY-MM-DD"),medication_id:1,amount:"",recommendation:"",diagnoses:[],prescriptions:[],files:[],tests:{},signature:null,isReVisit:!1,duration:"",recurringDate:"",recurringTime:{}}),D={get:h,data:r,setData:d,errors:u,setError:x,clearErrors:f,resetData:y,processing:C},[S,g]=k.useState("J00");k.useState(1);const[P,W]=k.useState(!1),[_,F]=k.useState([]),[I,le]=k.useState(!1),{isOpen:K,onOpen:w,onClose:j}=Se(),T=k.useRef(),z=Object.keys(r.tests),m=()=>{d("signature",T.current.toDataURL("image/png"))},re=()=>{T.current.clear(),d("signature",null)},{auth:se}=ge().props;k.useEffect(()=>{_.length>0&&d("files",_.map(a=>a.originFileObj))},[_]),k.useMemo(()=>{P||d({...r,prescriptions:[],medication_id:1,amount:"",recommendation:""})},[P]),k.useMemo(()=>{r.isReVisit?d({...r,duration:"",recurringDate:"",recurringTime:{}}):d({...r,duration:"",recurringDate:"",recurringTime:{}})},[r.isReVisit]),k.useMemo(()=>{i.forEach(a=>{ie[a.icd_code]=a}),t.forEach(a=>{V[a.id]=a})},[i,t]),k.useMemo(()=>{o.length>0&&(le(!0),d({...r,main_complaint:o[0].main_complaint,objective_note:o[0].objective_note,tests:o[0].test_results}))},[o]);const U=()=>{d("signature",null),j()};k.useMemo(()=>{(u.main_complaint||u.objective_note)&&U()},[u]);const Z=()=>{const a=S,b={date:Y.format("YYYY-MM-DD"),icd_code:a};r.diagnoses.find(de=>de.icd_code===a)||d("diagnoses",[...r.diagnoses,b])},R=a=>{const b=r.diagnoses.find(M=>M.icd_code===a);r.diagnoses.splice(r.diagnoses.indexOf(b),1),d("diagnoses",r.diagnoses)};let O=!1;const Q=a=>!!r[a],q=()=>{if(lt.forEach(M=>{Q(M)||(x(M,"This field is required"),O=!0)}),O)return;const a={patient_id:r.patient_id,doctor_id:se.doctor.id,date:Y.format("YYYY-MM-DD"),medication_id:r.medication_id,amount:r.amount,recommendation:r.recommendation};r.prescriptions.find(M=>M.medication_id===r.medication_id)?x("medication_id","This medication already exists"):d({...r,prescriptions:[...r.prescriptions,a],medication_id:1,amount:"",recommendation:""})},J=a=>{const b=r.prescriptions.find(M=>M.medication_id===a);r.prescriptions.splice(r.prescriptions.indexOf(b),1),d("prescriptions",r.prescriptions)},Pe=()=>{if(dt.forEach(b=>{Q(b)||(x(b,"This field is required"),O=!0)}),O)return;z.find(b=>b===r.test_name)?x("test_name","This test already exists"):(r.tests[r.test_name]=`${r.test_result} ${r.unit}`,d({...r,tests:r.tests,test_name:"",test_result:"",unit:""}))},Te=a=>{delete r.tests[a],d("tests",r.tests)},Me=a=>{if(a.preventDefault(),T.current.isEmpty()){x("signature","Please sign the document");return}if(r.isReVisit&&r.recurringDate==""){x("duration","Please pick an option"),U();return}p(route("appointment.note",{appointment:s.id}),{onSuccess:()=>{U()}})},A=()=>{const a=s.start_time.split(":"),b=s.end_time.split(":"),M=$(s.date).diff(Y.hour(0).minute(0))===0,de=$(s.date).hour(b[0]).minute(b[1]).diff(Y)<0,Re=$(s.date).hour(a[0]).minute(a[1]).diff(Y)>0,ke=$(s.date).hour(b[0]).minute(b[1]).add(1,"hour").diff(Y)<0,We=s.status==="canceled";return I||We||!M||de&&M&&ke||Re&&M};return e.jsx(Ue,{state:"none",children:e.jsxs(l,{w:"85vw",h:"99vh",fontSize:"14px",children:[e.jsxs(l,{w:"100%",p:"8px",ml:"16px",children:[e.jsxs(v,{align:"center",justify:"space-between",pt:"8px",w:"100%",children:[e.jsxs(l,{fontSize:"24px",fontWeight:"bold",children:["Office visit / ",s.id]}),A()?"":e.jsx(l,{children:e.jsx(N,{type:"submit",bg:"blue.400",color:"white",size:"sm",p:"2px 16px",onClick:w,_hover:{background:"blue.500"},children:"Sign & Save"})})]}),e.jsxs(v,{children:[e.jsxs(l,{fontSize:"12px",children:["Start time: ",`${s.start_time.split(":")[0]}:${s.start_time.split(":")[1]}`]}),e.jsxs(l,{fontSize:"12px",ml:"16px",children:["Arrive time: ",`${s.start_time.split(":")[0]}:${s.start_time.split(":")[1]}`]})]})]}),e.jsxs(ee,{w:"100%",h:"87vh",pl:"8px",children:[e.jsxs(l,{w:"40%",h:"100%",p:"16px",bg:"white",borderRadius:"xl",alignSelf:"flex-start",children:[e.jsxs(v,{w:"100%",pb:"8px",align:"center",justify:"space-between",borderBottom:"1px solid #ECEDED",fontSize:"16px",fontWeight:"bold",children:[e.jsx(l,{children:c.patient.name}),e.jsxs(l,{children:[c.patient.age," years old"]})]}),e.jsxs(l,{w:"100%",h:"100%",overflowY:"scroll",children:[e.jsxs(l,{w:"100%",borderBottom:"1px solid #ECEDED",py:"8px",children:[e.jsx(l,{fontSize:"16px",fontWeight:"bold",mb:"8px",children:"Allergies"}),e.jsxs(v,{w:"100%",mb:"8px",align:"center",justify:"space-between",fontSize:"12px",fontWeight:"bold",children:[e.jsxs(l,{w:"30%",h:"10vh",children:[e.jsx(l,{color:"gray",children:"Drug"}),c.allergies.Drug?c.allergies.Drug.map((a,b)=>e.jsxs(v,{w:"100%",justify:"space-between",align:"center",overflowY:"scroll",children:[e.jsx(l,{color:he[a.severity],fontWeight:"bold",children:a.severity}),e.jsx(l,{children:a.name})]},`drug-${b}`)):e.jsx(l,{fontWeight:"bold",children:"No known allergies"})]}),e.jsxs(l,{w:"30%",h:"10vh",children:[e.jsx(l,{color:"gray",children:"Food"}),c.allergies.Food?c.allergies.Food.map((a,b)=>e.jsxs(v,{w:"100%",justify:"space-between",align:"center",overflowY:"scroll",children:[e.jsx(l,{color:he[a.severity],fontWeight:"bold",children:a.severity}),e.jsx(l,{children:a.name})]},`drug-${b}`)):e.jsx(l,{fontWeight:"bold",children:"No known allergies"})]}),e.jsxs(l,{w:"30%",h:"10vh",children:[e.jsx(l,{color:"gray",children:"Environmental"}),c.allergies.Environmental?c.allergies.Environmental.map((a,b)=>e.jsxs(v,{w:"100%",justify:"space-between",align:"center",overflowY:"scroll",children:[e.jsx(l,{color:he[a.severity],fontWeight:"bold",children:a.severity}),e.jsx(l,{children:a.name})]},`drug-${b}`)):e.jsx(l,{fontWeight:"bold",children:"No known allergies"})]})]})]}),e.jsxs(l,{w:"100%",borderBottom:"1px solid #ECEDED",py:"8px",children:[e.jsx(l,{fontSize:"16px",fontWeight:"bold",mb:"8px",children:"Diagnoses"}),e.jsx(l,{w:"100%",h:"23vh",overflowY:"scroll",children:e.jsx(H,{w:"100%",spacing:2,children:c.diagnoses.length>0?c.diagnoses.map((a,b)=>e.jsxs(v,{align:"center",justify:"space-between",borderBottom:"1px solid #ECEDED",px:"2px",pb:"4px",mb:"4px",w:"100%",h:"5vh",children:[e.jsx(v,{align:"center",w:"12%",h:"100%",children:e.jsx(l,{bg:ie[a.icd_code].color,borderRadius:"md",w:"fit-content",p:"1px 5px",fontSize:"10px",color:"white",children:a.icd_code})}),e.jsx(v,{align:"center",fontSize:"11px",w:"65%",h:"100%",children:ie[a.icd_code].icd_name}),e.jsx(v,{align:"center",justify:"center",w:"20%",h:"100%",fontSize:"12px",children:xe(a.date)})]},`diagnosis-${b}`)):e.jsx(l,{fontWeight:"bold",children:"No Available Diagnoses"})})})]}),e.jsxs(l,{w:"100%",mt:"8px",py:"8px",children:[e.jsx(l,{fontSize:"16px",fontWeight:"bold",mb:"8px",children:"Prescriptions"}),e.jsx(l,{w:"100%",h:"23vh",overflowY:"scroll",children:e.jsx(H,{w:"100%",spacing:2,children:c.prescriptions.length>0?c.prescriptions.map((a,b)=>{const M=a.detail;return e.jsxs(v,{align:"center",justify:"space-between",borderBottom:"1px solid #ECEDED",px:"2px",pb:"4px",mb:"4px",w:"100%",h:"5vh",children:[e.jsx(v,{align:"center",w:"30%",fontWeight:"bold",fontSize:"12px",h:"100%",children:V[M.medication_id].medication_name}),e.jsx(v,{align:"center",fontSize:"11px",w:"50%",h:"100%",children:V[M.medication_id].type!=="liquid"?`${V[M.medication_id].dose}, ${M.amount} ${V[M.medication_id].type}`:`${V[M.medication_id].dose}`}),e.jsx(v,{align:"center",justify:"center",w:"20%",h:"100%",fontSize:"12px",children:xe(M.date)})]},`prescription-${b}`)}):e.jsx(l,{fontWeight:"bold",children:"No Available Prescriptions"})})})]}),e.jsxs(l,{w:"100%",mt:"8px",py:"8px",children:[e.jsx(l,{fontSize:"16px",fontWeight:"bold",mb:"8px",children:"Test Results"}),e.jsx(l,{w:"100%",h:"23vh",overflowY:"scroll",children:e.jsx(H,{w:"100%",spacing:2,children:e.jsx(Ye,{data:c,width:"90%"})})})]})]})]}),e.jsxs(H,{w:"60%",h:"100%",pr:"8px",overflowY:"scroll",children:[e.jsx(l,{w:"100%",p:"16px",bg:"white",borderRadius:"xl",children:e.jsxs(B,{isInvalid:u.main_complaint,children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Main complaint"}),e.jsx(ae,{disabled:A(),variant:"filled",borderRadius:"md",placeholder:"Main complaint",size:"sm",resize:A()||$(s.date).diff(Y.hour(0).minute(0))!==0?"none":"vertical",value:r.main_complaint,onChange:a=>{d("main_complaint",a.target.value),f("main_complaint")}}),e.jsx(L,{children:u.main_complaint})]})}),e.jsx(l,{w:"100%",p:"16px",bg:"white",borderRadius:"xl",children:e.jsxs(B,{isInvalid:u.objective_note,children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Objective note"}),e.jsx(ae,{disabled:A(),variant:"filled",borderRadius:"md",placeholder:"Objective note",h:"160px",fontSize:"14px",resize:A()?"none":"vertical",value:r.objective_note,onChange:a=>{d("objective_note",a.target.value),f("objective_note")}}),e.jsx(L,{children:u.objective_note})]})}),e.jsxs(l,{w:"100%",p:"16px",bg:"white",borderRadius:"xl",children:[A()?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Test results"}),e.jsx(H,{w:"100%",pb:"8px",spacing:1,borderBottom:"1px solid #ECEDED",children:z.length>0?z.map((a,b)=>e.jsxs(v,{align:"center",py:"8px",children:[e.jsx(l,{w:"5%",style:{cursor:"pointer"},onClick:()=>Te(a),children:e.jsx(oe,{})}),e.jsxs(ee,{w:"95%",spacing:3,ml:"16px",children:[e.jsx(l,{w:"30%",children:a}),e.jsx(l,{w:"70%",fontSize:"12px",children:r.tests[a]})]})]},b)):""}),e.jsxs(v,{w:"100%",mt:"8px",justify:"space-between",align:"center",children:[e.jsxs(B,{isInvalid:u.test_name,w:"45%",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Test Name"}),e.jsx(ne,{size:"sm",fontSize:"11px",variant:"filled",borderRadius:"md",placeholder:"Test name",value:r.test_name,onChange:a=>{d("test_name",a.target.value),f("test_name")}}),e.jsx(L,{children:u.test_name})]}),e.jsxs(B,{isInvalid:u.test_result,w:"35%",ml:"18px",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Result"}),e.jsx(ne,{size:"sm",fontSize:"11px",variant:"filled",borderRadius:"md",placeholder:"Result",value:r.test_result,onChange:a=>{d("test_result",a.target.value),f("test_result")}}),e.jsx(L,{children:u.test_result})]}),e.jsxs(B,{isInvalid:u.unit,w:"10%",ml:"8px",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Unit"}),e.jsx(ne,{size:"sm",fontSize:"11px",variant:"filled",borderRadius:"md",placeholder:"Unit",value:r.unit,onChange:a=>{d("unit",a.target.value),f("unit")}}),e.jsx(L,{children:u.unit})]}),e.jsx(N,{alignSelf:"flex-end",colorScheme:"blue",ml:"8px",size:"sm",onClick:Pe,children:"Add"})]})]}),I?G.isEmpty(o[0].test_results)?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Test results"}),e.jsxs(H,{w:"100%",pb:"8px",spacing:1,borderBottom:"1px solid #ECEDED",children:[e.jsxs(v,{w:"100%",h:"100%",p:"8px",align:"center",children:[e.jsx(l,{w:"30%",p:"8px",borderBottom:"1px solid #ECEDED",children:"Test name"}),e.jsx(l,{w:"70%",p:"8px",borderBottom:"1px solid #ECEDED",children:"Test results"})]}),z.length>0?z.map((a,b)=>e.jsxs(v,{w:"100%",h:"100%",p:"8px",align:"center",children:[e.jsx(l,{w:"30%",p:"8px",children:a}),e.jsx(l,{w:"70%",p:"8px",children:r.tests[a]})]},a)):""]})]}):e.jsx(e.Fragment,{})]}),A()?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{w:"100%",p:"16px",bg:"white",borderRadius:"xl",children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Diagnosis"}),e.jsxs(l,{w:"100%",children:[e.jsx(H,{w:"100%",pb:"8px",spacing:1,borderBottom:"1px solid #ECEDED",children:r.diagnoses.length>0?r.diagnoses.map((a,b)=>e.jsxs(v,{align:"center",py:"8px",children:[e.jsx(l,{w:"5%",style:{cursor:"pointer"},onClick:()=>R(a.icd_code),children:e.jsx(oe,{})}),e.jsxs(ee,{w:"95%",spacing:3,ml:"16px",children:[e.jsx(l,{w:"12%",children:e.jsx(l,{bg:ie[a.icd_code].color,borderRadius:"md",w:"fit-content",p:"1px 8px",fontSize:"10px",color:"white",children:a.icd_code})}),e.jsx(l,{w:"88%",fontSize:"12px",children:ie[a.icd_code].icd_name})]})]},a.icd_code)):""}),e.jsxs(H,{w:"100%",spacing:2,pt:"8px",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",children:"Code and name"}),e.jsxs(v,{w:"100%",children:[e.jsx(ue,{style:{paddingBottom:"8px"},variant:"filled",borderRadius:"md",fontSize:"10px",pb:"8px",w:"93%",size:"sm",value:S,onChange:a=>{g(a.target.value)},children:i.map(a=>e.jsxs("option",{value:a.icd_code,children:[a.icd_code,": ",a.icd_name]},a.icd_code))}),e.jsx(N,{colorScheme:"blue",ml:"16px",size:"sm",onClick:Z,children:"Add"})]})]})]})]}),e.jsxs(l,{w:"100%",p:"16px",bg:"white",borderRadius:"xl",children:[e.jsxs(v,{justify:"space-between",align:"center",w:"100%",children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Prescription"}),e.jsxs(v,{children:[e.jsx(l,{fontSize:"12px",fontWeight:"bold",me:"4px",children:"Make a prescription?"}),e.jsx(ye,{onChange:()=>W(!P)})]})]}),e.jsx(H,{w:"100%",pb:"8px",spacing:1,borderBottom:"1px solid #ECEDED",children:r.prescriptions.length>0?r.prescriptions.map((a,b)=>e.jsxs(v,{align:"center",py:"8px",children:[e.jsx(l,{w:"5%",style:{cursor:"pointer"},onClick:()=>J(a.medication_id),children:e.jsx(oe,{})}),e.jsxs(ee,{w:"95%",spacing:3,ml:"16px",children:[e.jsx(l,{w:"30%",fontSize:"12px",children:V[a.medication_id].medication_name}),e.jsx(l,{w:"70%",fontSize:"12px",children:`${V[a.medication_id].dose}, ${a.amount} per day`})]})]},b)):""}),e.jsxs(v,{w:"100%",borderBottom:"1px solid #ECEDED",py:"8px",align:"center",children:[e.jsxs(l,{w:"80%",children:[e.jsx(l,{fontSize:"12px",mb:"6px",color:"gray",fontWeight:"bold",children:"Name and Dosage"}),e.jsxs(B,{isInvalid:u.medication_id,w:"100%",mr:"2px",children:[e.jsx(ue,{style:{paddingBottom:"8px"},disabled:!P,variant:"filled",borderRadius:"md",fontSize:"10px",w:"100%",size:"sm",value:Number(r.medication_id),onChange:a=>{d("medication_id",Number(a.target.value)),f("medication_id")},children:t.map(a=>e.jsxs("option",{value:Number(a.id),children:[a.medication_name,", ",a.dose]},a.id))}),e.jsx(L,{w:"20vw",fontSize:"10px",children:u.medication_id})]})]}),e.jsxs(l,{w:"20%",ml:"5%",children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Amount"}),e.jsx(v,{align:"center",w:"100%",children:e.jsxs(B,{isInvalid:u.amount,w:"100%",mr:"2px",children:[e.jsx(ne,{type:"number",size:"sm",fontSize:"11px",w:"100%",disabled:!P,variant:"filled",borderRadius:"md",placeholder:"Amount",value:r.amount,onChange:a=>{d("amount",a.target.value),f("amount")}}),e.jsx(L,{w:"20vw",fontSize:"10px",children:u.amount})]})})]})]}),e.jsx(l,{w:"100%",pt:"8px",children:e.jsxs(B,{isInvalid:u.recommendation,children:[e.jsx(l,{fontSize:"12px",color:"gray",fontWeight:"bold",mb:"6px",children:"Recommendation"}),e.jsx(ae,{variant:"filled",borderRadius:"md",disabled:!P,placeholder:"Recommendation",size:"sm",resize:A()?"none":"vertical",value:r.recommendation,onChange:a=>{d("recommendation",a.target.value),f("recommendation")}}),e.jsx(L,{children:u.recommendation})]})}),e.jsx(v,{w:"100%",pt:"8px",justify:"flex-end",align:"center",children:e.jsx(N,{isDisabled:!P,colorScheme:"blue",ml:"2px",size:"sm",onClick:q,children:"Add"})})]})]}),!A()&&!G.isEmpty(r.recurringTime)?e.jsxs(v,{align:"center",py:"8px",ml:"16px",children:[e.jsx(l,{w:"5%",style:{cursor:"pointer"},onClick:()=>d("isReVisit",!1),children:e.jsx(oe,{})}),e.jsx(ee,{w:"95%",spacing:3,ml:"16px",children:e.jsxs(l,{children:["Re-visit on ",r.recurringDate," at ",r.recurringTime.start_time]})})]}):I&&!G.isEmpty(o[0].recurringTime)?e.jsxs(l,{fontWeight:"bold",ml:"16px",children:["Note: Re-visit on ",o[0].recurringDate," at ",o[0].recurringTime.start_time]}):e.jsx(e.Fragment,{}),A()?"":e.jsxs(e.Fragment,{children:[e.jsx(at,{dataManager:D}),e.jsxs(l,{w:"100%",p:"16px",bg:"white",children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Additional documentation"}),e.jsx(Ge,{accept:"image/*,.pdf",listType:"picture",customRequest:({onSuccess:a})=>setTimeout(()=>{a("ok",null)},0),onChange:({file:a,fileList:b})=>{F(b)},children:e.jsx(Xe,{icon:e.jsx(Ke,{}),children:"Upload"})})]})]}),A()?I?e.jsxs(l,{bg:"white",borderRadius:"md",w:"100%",p:"16px",children:[e.jsx(l,{fontWeight:"bold",mb:"8px",children:"Signature"}),e.jsx(v,{w:"100%",justify:"center",children:e.jsx("img",{src:o[0].signature,alt:"signature",width:"50%"})})]}):e.jsx(e.Fragment,{}):e.jsx(N,{onClick:w,type:"submit",bg:"blue.400",color:"white",w:"100%",mt:"32px",py:"8px",_hover:{background:"blue.500"},children:"Sign & Save"})]})]}),e.jsxs(_e,{isOpen:K,size:"lg",onClose:U,isCentered:!0,children:[e.jsx(je,{}),e.jsxs(Ce,{children:[e.jsx(Ee,{children:"Please Sign"}),e.jsx(be,{}),e.jsx(we,{children:e.jsxs(B,{w:"100%",isInvalid:u.signature,children:[e.jsx(rt,{ref:T,canvasProps:{className:"signature"},onEnd:m,onBegin:()=>f("signature"),dotSize:.1}),e.jsx(L,{children:u.signature})]})}),e.jsx(De,{children:e.jsxs(v,{justify:"space-between",align:"center",w:"100%",children:[e.jsx(N,{onClick:re,colorScheme:"gray",py:"8px",children:"Clear"}),e.jsxs(l,{children:[e.jsx(N,{onClick:Me,isLoading:C,type:"submit",bg:"blue.400",color:"white",py:"8px",_hover:{background:"blue.500"},children:"Save"}),e.jsx(N,{variant:"ghost",colorScheme:"red",ml:3,onClick:U,children:"Close"})]})]})})]})]})]})})}export{kt as default};
