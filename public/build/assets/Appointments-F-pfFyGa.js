import{W as B,j as t,r as w,q as C}from"./app-DmHSQUrN.js";import{C as D,a as k}from"./chunk-6RTX462E-XFuRjhwY.js";import{d as b}from"./dayjs.min-d0VlGjK2.js";import{w as M,a as T}from"./weekOfYear-CS9eppDX.js";import{D as v,B as I}from"./DoctorLayout-CL6AJZKz.js";import{G as O}from"./iconBase-D2yQHSeX.js";import{G as i}from"./chunk-JARCRF6W-CGzvDlTs.js";import{G as s}from"./chunk-ZPFGWTBB-ClHQGPUG.js";import{F as y,B as o}from"./chunk-KRPLQIP4-BozMeS5C.js";import{C as Y}from"./chunk-Q6Q7I7E5-B46-ZYcX.js";import"./Logo-Cr2pyXQ1.js";function _(r){return O({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6v2h8.59L5 17.59 6.41 19 16 9.41V18h2V6z"},child:[]}]})(r)}const m=b(),z=r=>{let e=0;return r>10&&r<=20&&(e=1),r>20&&r<=40?e=2:r>40&&(e=3),e},S=(r,e)=>{r=r.split(":"),e=e.split(":");const n=new Date(0,0,0,r[0],r[1],0);let a=new Date(0,0,0,e[0],e[1],0).getTime()-n.getTime();const l=Math.floor(a/1e3/60/60);a-=l*1e3*60*60;const c=Math.floor(a/1e3/60);return l*3+z(c)},h=(r,e,n="8:00")=>{let d=n;return r.map((a,l)=>{const c=[],x=S(d,a.start_time),g=S(a.start_time,a.end_time),f=a.start_time.split(":"),F=a.end_time.split(":"),j=a.patient.name.split(" ");return d=a.end_time,x&&c.push(t.jsx(s,{rowSpan:x},`empty-${l}`)),c.push(t.jsx(s,{borderRadius:"md",bg:g>1?"purple.100":"orange.100",p:"4px 4px",rowSpan:g,children:g===1?t.jsxs(y,{justify:"space-between",children:[t.jsx(o,{color:"black",fontWeight:"bold",children:`${j[0].charAt(0).toUpperCase()}. ${j[1]}`}),t.jsx(o,{children:`${f[0]}:${f[1]}`})]}):t.jsxs(y,{direction:"column",h:"100%",p:"4px 4px",justify:"space-between",children:[t.jsxs(y,{w:"100%",justify:"space-between",align:"center",children:[t.jsx(o,{color:"black",fontWeight:"bold",fontSize:"13px",children:a.patient.name}),t.jsx(_,{style:{cursor:"pointer"},title:"Go to appointment note",onClick:()=>e(a.id)})]}),t.jsx(o,{children:`${f[0]}:${f[1]} > ${F[0]}:${F[1]}`})]})},l)),F[1]>=40&&(d=`${Number(F[0])+1}:00:00`,c.push(t.jsx(s,{rowSpan:1},`empty-${l}-ex`))),c})};function W({data:r,date:e}){const{get:n}=B(),d=a=>{n(route("appointment.note",{appointment:a},{forceFormData:!0}))};return t.jsxs(t.Fragment,{children:[t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Monday?h(r.Monday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,bg:m.date()===e.add(1,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Tuesday?h(r.Tuesday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.add(2,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Wednesday?h(r.Wednesday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.add(3,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Thursday?h(r.Thursday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.add(4,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Friday?h(r.Friday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.add(5,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Saturday?h(r.Saturday,d):""}),t.jsx(i,{templateRows:"repeat(45, 1fr)",gap:.5,borderBottomRadius:"md",bg:m.date()===e.add(6,"day").date()?"#F2F7FF":"transparent",w:"14.26%",h:"100%",pl:"1px",children:r.Sunday?h(r.Sunday,d):""})]})}b.extend(M);b.extend(T);const $=[],p=b();let G=8;for(let r=0;r<=45;r++){const e=r%3===0?t.jsx(s,{fontSize:"11px",rowSpan:1,children:`${G++}:00`},r):t.jsx(s,{rowSpan:1},r);$.push(e)}const u=(r,e)=>new Date(r).toLocaleDateString(e,{weekday:"short"});function Q({appointments:r}){const[e,n]=w.useState(p.weekday(1)),[d,a]=w.useState(r),{get:l,processing:c}=B(),{flash:x,message:g}=C().props;w.useEffect(()=>{const j=e.format("YYYY-MM-DD"),R=e.add(6,"day").format("YYYY-MM-DD");l(route("appointment.show",{date_start:j,date_end:R}),{preserveState:!0})},[e]),w.useMemo(()=>{x&&x.appointment&&a(x.appointment.list)},[x]);const f=()=>{n(e.subtract(1,"week"))},F=()=>{n(e.add(1,"week"))};return t.jsx(v,{state:"appointments",children:t.jsx(o,{h:"100%",children:t.jsxs(o,{w:"87vw",h:"100%",p:"8px 32px",fontSize:"14px",children:[t.jsxs(y,{align:"center",justify:"flex-start",mb:"8px",children:[t.jsx(o,{border:"1px solid gray",borderRadius:"md",p:"1px 10px",mr:"6px",style:{cursor:"pointer"},_hover:{backgroundColor:"blue.400",color:"white"},onClick:()=>n(p.weekday(1)),color:"#1366DE",children:"Today"}),t.jsx(o,{mx:"6px",children:t.jsx(I,{})}),t.jsxs(y,{align:"center",justify:"space-evenly",ml:"6px",children:[t.jsx(o,{style:{cursor:"pointer"},onClick:f,children:t.jsx(D,{})}),t.jsx(o,{fontWeight:"bold",fontSize:"14px",mr:"4px",children:e.format("MMMM YYYY")}),t.jsx(o,{children:"/"}),t.jsx(o,{fontSize:"13px",color:"gray.400",ml:"4px",children:`week ${e.week()}`}),t.jsx(o,{style:{cursor:"pointer"},onClick:F,children:t.jsx(k,{})})]})]}),t.jsxs(y,{w:"100%",h:"95%",mt:"16px",p:"8px",borderRadius:"md",overflow:"scroll",fontSize:"12px",children:[t.jsx(i,{templateRows:"repeat(45, 1fr)",w:"2%",height:"1225px",mt:"24px",pr:"40px",borderRight:"1px solid #708CBB",children:$}),t.jsxs(o,{w:"98%",children:[t.jsxs(i,{templateColumns:"repeat(7, 1fr)",gap:0,w:"100%",h:"4%",textAlign:"center",children:[t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.date()?"#F2F7FF":"transparent",children:`${u(e.toISOString())} ${e.date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(1,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(1,"day").toISOString())} ${e.add(1,"day").date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(2,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(2,"day").toISOString())} ${e.add(2,"day").date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(3,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(3,"day").toISOString())} ${e.add(3,"day").date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(4,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(4,"day").toISOString())} ${e.add(4,"day").date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(5,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(5,"day").toISOString())} ${e.add(5,"day").date()}`}),t.jsx(s,{borderBottom:"1px solid #708CBB",borderTopRadius:"md",w:"100%",bg:p.date()===e.add(6,"day").date()?"#F2F7FF":"transparent",children:`${u(e.add(6,"day").toISOString())} ${e.add(6,"day").date()}`})]}),t.jsx(y,{w:"100%",h:"1225px",children:!c&&d?t.jsx(W,{data:d,date:e}):t.jsx(Y,{mx:"auto",mt:"45vh",isIndeterminate:!0,color:"blue.300"})})]})]})]})})})}export{Q as default};
